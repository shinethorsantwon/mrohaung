(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78894,e=>{"use strict";let t=(0,e.i(75254).default)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);e.s(["AlertTriangle",()=>t],78894)},31278,e=>{"use strict";let t=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>t],31278)},43531,e=>{"use strict";let t=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>t],43531)},70756,e=>{"use strict";let t=(0,e.i(75254).default)("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);e.s(["Lock",()=>t],70756)},27612,e=>{"use strict";let t=(0,e.i(75254).default)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);e.s(["Trash2",()=>t],27612)},73708,e=>{"use strict";let t=(0,e.i(75254).default)("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);e.s(["Image",()=>t],73708)},88653,e=>{"use strict";e.i(47167);var t=e.i(43476),s=e.i(71645),l=e.i(31178),a=e.i(47414),r=e.i(74008),i=e.i(21476),n=e.i(72846),o=s,c=e.i(37806);function d(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}class u extends o.Component{getSnapshotBeforeUpdate(e){let t=this.props.childRef.current;if(t&&e.isPresent&&!this.props.isPresent&&!1!==this.props.pop){let e=t.offsetParent,s=(0,n.isHTMLElement)(e)&&e.offsetWidth||0,l=(0,n.isHTMLElement)(e)&&e.offsetHeight||0,a=this.props.sizeRef.current;a.height=t.offsetHeight||0,a.width=t.offsetWidth||0,a.top=t.offsetTop,a.left=t.offsetLeft,a.right=s-a.width-a.left,a.bottom=l-a.height-a.top}return null}componentDidUpdate(){}render(){return this.props.children}}function x({children:e,isPresent:l,anchorX:a,anchorY:r,root:i,pop:n}){let x=(0,o.useId)(),m=(0,o.useRef)(null),h=(0,o.useRef)({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:p}=(0,o.useContext)(c.MotionConfigContext),f=function(...e){return s.useCallback(function(...e){return t=>{let s=!1,l=e.map(e=>{let l=d(e,t);return s||"function"!=typeof l||(s=!0),l});if(s)return()=>{for(let t=0;t<l.length;t++){let s=l[t];"function"==typeof s?s():d(e[t],null)}}}}(...e),e)}(m,e.props?.ref??e?.ref);return(0,o.useInsertionEffect)(()=>{let{width:e,height:t,top:s,left:o,right:c,bottom:d}=h.current;if(l||!1===n||!m.current||!e||!t)return;let u="left"===a?`left: ${o}`:`right: ${c}`,f="bottom"===r?`bottom: ${d}`:`top: ${s}`;m.current.dataset.motionPopId=x;let b=document.createElement("style");p&&(b.nonce=p);let g=i??document.head;return g.appendChild(b),b.sheet&&b.sheet.insertRule(`
          [data-motion-pop-id="${x}"] {
            position: absolute !important;
            width: ${e}px !important;
            height: ${t}px !important;
            ${u}px !important;
            ${f}px !important;
          }
        `),()=>{g.contains(b)&&g.removeChild(b)}},[l]),(0,t.jsx)(u,{isPresent:l,childRef:m,sizeRef:h,pop:n,children:!1===n?e:o.cloneElement(e,{ref:f})})}let m=({children:e,initial:l,isPresent:r,onExitComplete:n,custom:o,presenceAffectsLayout:c,mode:d,anchorX:u,anchorY:m,root:p})=>{let f=(0,a.useConstant)(h),b=(0,s.useId)(),g=!0,j=(0,s.useMemo)(()=>(g=!1,{id:b,initial:l,isPresent:r,custom:o,onExitComplete:e=>{for(let t of(f.set(e,!0),f.values()))if(!t)return;n&&n()},register:e=>(f.set(e,!1),()=>f.delete(e))}),[r,f,n]);return c&&g&&(j={...j}),(0,s.useMemo)(()=>{f.forEach((e,t)=>f.set(t,!1))},[r]),s.useEffect(()=>{r||f.size||!n||n()},[r]),e=(0,t.jsx)(x,{pop:"popLayout"===d,isPresent:r,anchorX:u,anchorY:m,root:p,children:e}),(0,t.jsx)(i.PresenceContext.Provider,{value:j,children:e})};function h(){return new Map}var p=e.i(64978);let f=e=>e.key||"";function b(e){let t=[];return s.Children.forEach(e,e=>{(0,s.isValidElement)(e)&&t.push(e)}),t}let g=({children:e,custom:i,initial:n=!0,onExitComplete:o,presenceAffectsLayout:c=!0,mode:d="sync",propagate:u=!1,anchorX:x="left",anchorY:h="top",root:g})=>{let[j,v]=(0,p.usePresence)(u),y=(0,s.useMemo)(()=>b(e),[e]),w=u&&!j?[]:y.map(f),N=(0,s.useRef)(!0),k=(0,s.useRef)(y),C=(0,a.useConstant)(()=>new Map),S=(0,s.useRef)(new Set),[U,M]=(0,s.useState)(y),[R,E]=(0,s.useState)(y);(0,r.useIsomorphicLayoutEffect)(()=>{N.current=!1,k.current=y;for(let e=0;e<R.length;e++){let t=f(R[e]);w.includes(t)?(C.delete(t),S.current.delete(t)):!0!==C.get(t)&&C.set(t,!1)}},[R,w.length,w.join("-")]);let L=[];if(y!==U){let e=[...y];for(let t=0;t<R.length;t++){let s=R[t],l=f(s);w.includes(l)||(e.splice(t,0,s),L.push(s))}return"wait"===d&&L.length&&(e=L),E(b(e)),M(y),null}let{forceRender:P}=(0,s.useContext)(l.LayoutGroupContext);return(0,t.jsx)(t.Fragment,{children:R.map(e=>{let s=f(e),l=(!u||!!j)&&(y===R||w.includes(s));return(0,t.jsx)(m,{isPresent:l,initial:(!N.current||!!n)&&void 0,custom:i,presenceAffectsLayout:c,mode:d,root:g,onExitComplete:l?void 0:()=>{if(S.current.has(s)||(S.current.add(s),!C.has(s)))return;C.set(s,!0);let e=!0;C.forEach(t=>{t||(e=!1)}),e&&(P?.(),E(k.current),u&&v?.(),o&&o())},anchorX:x,anchorY:h,children:e},s)})})};e.s(["AnimatePresence",()=>g],88653)},14764,e=>{"use strict";let t=(0,e.i(75254).default)("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);e.s(["Send",()=>t],14764)},97960,e=>{"use strict";let t=(0,e.i(75254).default)("smile",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 14s1.5 2 4 2 4-2 4-2",key:"1y1vjs"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["Smile",()=>t],97960)},87316,e=>{"use strict";let t=(0,e.i(75254).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);e.s(["Calendar",()=>t],87316)},23585,e=>{"use strict";let t=(0,e.i(75254).default)("ellipsis-vertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]);e.s(["MoreVertical",()=>t],23585)},31034,e=>{"use strict";var t=e.i(43476),s=e.i(71645),l=e.i(18566),a=e.i(87316),r=e.i(92930),i=e.i(79002),n=e.i(75254);let o=(0,n.default)("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]);var c=e.i(73708),d=e.i(31278);let u=(0,n.default)("ban",[["path",{d:"M4.929 4.929 19.07 19.071",key:"196cmz"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);var x=e.i(23585),m=e.i(94983),h=e.i(70273),p=e.i(43531),f=e.i(37727),b=e.i(13385),g=e.i(85384),j=e.i(53e3),v=e.i(69074);function y({isOpen:e,onClose:l,currentUser:a,onUpdate:r,initialAvatar:i,initialCover:n}){let[o,u]=(0,s.useState)(a?.bio||""),[x,m]=(0,s.useState)(null),[h,p]=(0,s.useState)(null),[j,y]=(0,s.useState)(null),[w,N]=(0,s.useState)(null),[k,C]=(0,s.useState)(!1);if((0,s.useEffect)(()=>{e?(i&&(m(i),p(URL.createObjectURL(i))),n&&(y(n),N(URL.createObjectURL(n)))):(m(null),p(null),y(null),N(null))},[e,i,n]),!e)return null;let S=async e=>{let t=e.target.files?.[0];if(t)try{let e=await (0,b.default)(t,{maxSizeMB:.5,maxWidthOrHeight:400,useWebWorker:!0,fileType:"image/jpeg"});m(e),p(URL.createObjectURL(e))}catch(e){console.error("Error compressing avatar:",e),m(t),p(URL.createObjectURL(t))}},U=async e=>{let t=e.target.files?.[0];if(t)try{let e=await (0,b.default)(t,{maxSizeMB:.8,maxWidthOrHeight:1200,useWebWorker:!0,fileType:"image/jpeg"});y(e),N(URL.createObjectURL(e))}catch(e){console.error("Error compressing cover:",e),y(t),N(URL.createObjectURL(t))}},M=async e=>{e.preventDefault(),C(!0);let t=new FormData;t.append("bio",o),x&&t.append("avatar",x),j&&t.append("cover",j);try{let e=(await g.default.put("/profile",t)).data;if(e){let t=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify({...t,...e})),window.dispatchEvent(new Event("userUpdated"))}r(),l()}catch(e){console.error("Failed to update profile:",e)}finally{C(!1)}};return(0,t.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm",children:(0,t.jsxs)("div",{className:"bg-[#1e293b] border border-[#334155] rounded-3xl w-full max-w-lg mx-4 overflow-hidden",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-[#334155]",children:[(0,t.jsx)("h2",{className:"text-xl font-bold text-white",children:"Edit Profile"}),(0,t.jsx)("button",{onClick:l,className:"p-2 hover:bg-[#334155] rounded-full transition-colors",children:(0,t.jsx)(f.X,{className:"w-5 h-5 text-[#94a3b8]"})})]}),(0,t.jsxs)("form",{onSubmit:M,className:"p-6 space-y-6 overflow-y-auto max-h-[80vh] no-scrollbar",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-[#94a3b8]",children:"Cover Photo"}),(0,t.jsxs)("div",{className:"relative h-32 w-full rounded-xl overflow-hidden bg-[#0f172a] border border-[#334155]",children:[w||a?.coverUrl?(0,t.jsx)("img",{src:w||a.coverUrl,alt:"Cover preview",className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full bg-gradient-to-r from-blue-600/20 to-purple-600/20 flex items-center justify-center",children:(0,t.jsx)(c.Image,{className:"w-8 h-8 text-[#334155]"})}),(0,t.jsxs)("label",{className:"absolute bottom-2 right-2 p-2 bg-blue-600 hover:bg-blue-700 rounded-full cursor-pointer transition-colors shadow-lg",children:[(0,t.jsx)(v.Upload,{className:"w-4 h-4 text-white"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:U,className:"hidden"})]})]})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"w-24 h-24 rounded-full overflow-hidden bg-[#334155] border-4 border-[#1e293b]",children:h||a?.avatarUrl?(0,t.jsx)("img",{src:h||a.avatarUrl,alt:"Avatar",className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:(0,t.jsx)("span",{className:"text-3xl font-bold text-white",children:(a?.displayName||a?.username)?.[0]?.toUpperCase()})})}),(0,t.jsxs)("label",{className:"absolute bottom-0 right-0 p-2 bg-blue-600 hover:bg-blue-700 rounded-full cursor-pointer transition-colors",children:[(0,t.jsx)(v.Upload,{className:"w-4 h-4 text-white"}),(0,t.jsx)("input",{type:"file",accept:"image/*",onChange:S,className:"hidden"})]})]}),(0,t.jsx)("p",{className:"text-sm text-[#64748b]",children:"Click to upload new avatar"})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"text-sm font-semibold text-[#94a3b8]",children:"Bio"}),(0,t.jsx)("textarea",{value:o,onChange:e=>u(e.target.value),placeholder:"Tell us about yourself...",className:"w-full bg-[#0f172a] border border-[#334155] rounded-xl px-4 py-3 text-white placeholder-[#64748b] focus:outline-none focus:ring-2 focus:ring-blue-500/50 resize-none h-32",maxLength:160}),(0,t.jsxs)("p",{className:"text-xs text-[#64748b] text-right",children:[o.length,"/160"]})]}),(0,t.jsxs)("div",{className:"flex gap-3",children:[(0,t.jsx)("button",{type:"button",onClick:l,className:"flex-1 px-6 py-3 bg-[#334155] hover:bg-[#475569] text-white font-semibold rounded-xl transition-colors",children:"Cancel"}),(0,t.jsx)("button",{type:"submit",disabled:k,className:"flex-1 px-6 py-3 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 text-white font-semibold rounded-xl transition-colors flex items-center justify-center gap-2",children:k?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"w-5 h-5 animate-spin"}),"Saving..."]}):"Save Changes"})]})]})]})})}var w=e.i(5469),N=e.i(15377),k=e.i(464),C=e.i(56011);function S(){let e=(0,l.useParams)(),n=(0,l.useRouter)(),[v,S]=(0,s.useState)(null),[U,M]=(0,s.useState)([]),[R,E]=(0,s.useState)(!0),[L,P]=(0,s.useState)(!1),[O,I]=(0,s.useState)("posts"),[F,$]=(0,s.useState)(!1),[z,T]=(0,s.useState)(null),[A,B]=(0,s.useState)("none"),[W,D]=(0,s.useState)(""),[H,q]=(0,s.useState)(!1),[V,J]=(0,s.useState)(""),[Y,_]=(0,s.useState)(!1),[X,G]=(0,s.useState)(!1),[K,Q]=(0,s.useState)(!1),[Z,ee]=(0,s.useState)(null),[et,es]=(0,s.useState)(!1),el=(0,s.useRef)(null),ea=(0,s.useRef)(null),[er,ei]=(0,s.useState)(null),[en,eo]=(0,s.useState)(null),[ec,ed]=(0,s.useState)(!1),[eu,ex]=(0,s.useState)(50),[em,eh]=(0,s.useState)(null),[ep,ef]=(0,s.useState)(null),[eb,eg]=(0,s.useState)(!1),ej=(0,s.useRef)(null),ev=(0,s.useRef)(50),ey=async()=>{try{let t=JSON.parse(localStorage.getItem("user")||"{}");T(t);let s=e.id||t.username;if(!s||"[id]"===s)return;P(s===t.username);let[l,a]=await Promise.all([g.default.get(`/profile/${s}`),g.default.get(`/posts/user/${s}`)]);if(S(l.data),M(a.data),s!==t.username){try{if((await g.default.get("/friends")).data.some(e=>e.username===l.data.username))B("friends");else{let e=(await g.default.get("/friends/requests")).data,s=e.find(e=>e.userId===t.id&&e.friendId===l.data.id),a=e.find(e=>e.userId===l.data.id&&e.friendId===t.id);s?B("pending"):a?(B("incoming"),D(a.id)):B("none")}}catch(e){console.error("Failed to check friend status:",e)}try{let e=await g.default.get(`/privacy/check-blocked/${l.data.id}`);_(e.data.isBlocked),G(e.data.blockedByMe)}catch(e){console.error("Failed to check block status:",e)}}}catch(e){console.error("Failed to fetch profile:",e)}finally{E(!1)}},ew=async()=>{if(W)try{await g.default.post(`/friends/accept/${W}`),B("friends"),D("")}catch(e){J(e?.response?.data?.message||e?.message||"Failed to accept request")}},eN=async()=>{if(v){q(!0),J("");try{await g.default.post("/friends/request",{friendId:v.id}),B("pending")}catch(e){J(e?.response?.data?.message||e?.message||"Failed to send friend request"),console.error("Failed to send friend request:",e)}finally{q(!1)}}},ek=async()=>{if(v&&confirm(`Are you sure you want to block @${v.username}?`))try{await g.default.post(`/privacy/block/${v.id}`),_(!0),G(!0),B("none"),Q(!1)}catch(e){console.error("Failed to block user:",e)}},eC=async()=>{if(v)try{await g.default.delete(`/privacy/unblock/${v.id}`),_(!1),G(!1),Q(!1)}catch(e){console.error("Failed to unblock user:",e)}};(0,s.useEffect)(()=>{ey()},[e.id]);let eS=async e=>{let t=e.target.files?.[0];if(t)try{let e=await (0,b.default)(t,{maxSizeMB:.8,maxWidthOrHeight:1500,useWebWorker:!0,fileType:"image/jpeg"});ef(e),eh(URL.createObjectURL(e)),ex(50),ed(!0)}catch(e){console.error("Error compressing cover:",e)}},eU=e=>{!ec||e.target.closest("button, a, input")||(ej.current="touches"in e?e.touches[0].clientY:e.clientY,ev.current=eu)},eM=e=>{if(!ec||null===ej.current)return;let t=("touches"in e?e.touches[0].clientY:e.clientY)-ej.current;ex(Math.max(0,Math.min(100,ev.current-t/2)))},eR=()=>{ej.current=null},eE=async()=>{if(!v||!ep&&eu===v.coverOffset)return;eg(!0);let e=new FormData;ep&&e.append("cover",ep),e.append("coverOffset",eu.toString()),e.append("bio",v.bio||"");try{let t=(await g.default.put("/profile",e)).data;if(t){let e=JSON.parse(localStorage.getItem("user")||"{}");localStorage.setItem("user",JSON.stringify({...e,...t})),window.dispatchEvent(new Event("userUpdated")),S(e=>e?{...e,...t}:null)}ed(!1),ef(null),eh(null)}catch(e){console.error("Failed to save cover:",e)}finally{eg(!1)}};return R?(0,t.jsx)("div",{className:"min-h-screen bg-[#0f172a] flex items-center justify-center",children:(0,t.jsx)(d.Loader2,{className:"w-8 h-8 text-blue-500 animate-spin"})}):v?(0,t.jsxs)(w.default,{children:[(0,t.jsxs)("div",{className:`relative h-48 sm:h-72 overflow-hidden transition-all bg-gradient-to-br from-blue-600 via-purple-600 to-pink-600 ${ec?"cursor-move ring-4 ring-blue-500 ring-inset shadow-2xl":""}`,onMouseDown:eU,onMouseMove:eM,onMouseUp:eR,onMouseLeave:eR,onTouchStart:eU,onTouchMove:eM,onTouchEnd:eR,children:[(em||v.coverUrl)&&(0,t.jsx)("img",{src:em||v.coverUrl,alt:"Cover",className:"absolute inset-0 w-full h-full object-cover select-none pointer-events-none transition-transform duration-700 group-hover:scale-105",style:{objectPosition:`50% ${ec?eu:v.coverOffset??50}%`}}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-[#0f172a] via-[#0f172a]/20 to-transparent pointer-events-none"}),(0,t.jsx)("div",{className:"absolute inset-0 bg-gradient-to-b from-black/30 via-transparent to-transparent pointer-events-none"}),(0,t.jsx)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 bg-black/5 transition-opacity duration-500 pointer-events-none"}),L&&(0,t.jsxs)("div",{className:"absolute inset-0 z-20",children:[ec?(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-2",children:[(0,t.jsxs)("button",{onClick:()=>{ed(!1),ef(null),eh(null),ex(v?.coverOffset??50)},className:"p-2.5 bg-white/10 hover:bg-white/20 text-white rounded-xl backdrop-blur-md border border-white/20 transition-all flex items-center gap-2 px-4 shadow-xl",children:[(0,t.jsx)(f.X,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm font-bold",children:"Cancel"})]}),(0,t.jsxs)("button",{onClick:eE,disabled:eb,className:"p-2.5 bg-blue-600 hover:bg-blue-500 text-white rounded-xl backdrop-blur-md border border-blue-400/50 transition-all flex items-center gap-2 px-4 shadow-lg shadow-blue-500/20",children:[eb?(0,t.jsx)(d.Loader2,{className:"w-5 h-5 animate-spin"}):(0,t.jsx)(p.Check,{className:"w-5 h-5"}),(0,t.jsx)("span",{className:"text-sm font-bold",children:eb?"Saving...":"Save"})]})]}):(0,t.jsxs)("div",{className:"absolute top-4 right-4 flex items-center gap-2 scale-90 group-hover:scale-100 transition-transform origin-top-right",children:[v.coverUrl&&(0,t.jsx)("button",{onClick:()=>{ex(v.coverOffset??50),ed(!0)},className:"p-2.5 bg-white/10 hover:bg-white/20 text-white rounded-xl backdrop-blur-md border border-white/20 transition-all shadow-lg group/btn",title:"Reposition Photo",children:(0,t.jsx)(r.Edit2,{className:"w-4 h-4 transition-transform group-hover/btn:rotate-12"})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("input",{type:"file",ref:ea,className:"hidden",accept:"image/*",onChange:eS}),(0,t.jsx)("button",{onClick:()=>{ea.current?.click()},className:"p-2.5 bg-white/20 hover:bg-blue-600 text-white rounded-xl backdrop-blur-md border border-white/30 transition-all shadow-xl group/upload",title:"Change Cover Photo",children:(0,t.jsx)(c.Image,{className:"w-5 h-5 transition-transform group-hover/upload:scale-110"})})]})]}),ec&&(0,t.jsx)("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 px-4 py-2 bg-blue-600/90 backdrop-blur-md rounded-full text-white text-[10px] font-bold uppercase tracking-widest pointer-events-none shadow-xl",children:"Drag to Reposition"})]})]}),(0,t.jsx)("div",{className:"max-w-6xl mx-auto relative z-10 px-4 sm:px-6",children:(0,t.jsxs)("div",{className:"flex items-start gap-4 -mt-10 sm:-mt-14 mb-4",children:[(0,t.jsxs)("div",{className:"relative flex-shrink-0 z-20",children:[(0,t.jsx)("div",{className:"w-20 h-20 sm:w-28 sm:h-28 rounded-full border-4 border-[#0f172a] bg-[#1e293b] overflow-hidden shadow-2xl ring-2 ring-white/5",children:v.avatarUrl?(0,t.jsx)("img",{src:v.avatarUrl,alt:v.displayName||v.username||"",className:"w-full h-full object-cover"}):(0,t.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:(0,t.jsx)("span",{className:"text-3xl sm:text-4xl font-bold text-white",children:(v.displayName||v.username)?.[0]?.toUpperCase()||"U"})})}),L&&(0,t.jsxs)("div",{className:"absolute -bottom-1 right-0.5 z-30",children:[(0,t.jsx)("input",{type:"file",ref:el,className:"hidden",accept:"image/*",onChange:e=>{let t=e.target.files?.[0];t&&(ei(t),eo(null),$(!0))}}),(0,t.jsx)("button",{onClick:()=>{el.current?.click()},className:"p-1.5 bg-blue-600 hover:bg-blue-500 rounded-full transition-all shadow-lg border-2 border-[#0f172a]",children:(0,t.jsx)(c.Image,{className:"w-3.5 h-3.5 text-white"})})]})]}),(0,t.jsx)("div",{className:"flex-1 min-w-0 pt-8 sm:pt-10",children:(0,t.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3 mb-2",children:[(0,t.jsx)("div",{className:"flex flex-col gap-1",children:(0,t.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,t.jsxs)("div",{className:"flex flex-col",children:[(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-white tracking-tight break-words leading-tight",children:v.displayName||v.username}),v.displayName&&(0,t.jsxs)("p",{className:"text-sm text-[#64748b] font-medium tracking-wide",children:["@",v.username]})]}),(v.reputation||0)>10&&(0,t.jsx)("div",{className:`px-2 py-0.5 rounded-full text-[10px] font-bold uppercase tracking-wider w-fit h-fit mt-1 ${(v.reputation||0)>100?"bg-yellow-500/10 text-yellow-400":(v.reputation||0)>50?"bg-purple-500/10 text-purple-400":"bg-blue-500/10 text-blue-400"}`,children:(v.reputation||0)>100?"Legend":(v.reputation||0)>50?"Community Pillar":"Rising Star"})]})}),(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-2",children:!L&&(0,t.jsx)(t.Fragment,{children:Y?(0,t.jsxs)("button",{onClick:eC,className:"px-4 py-2.5 bg-red-600 hover:bg-red-500 rounded-xl font-semibold text-sm transition-all flex items-center justify-center gap-1.5",children:[(0,t.jsx)(u,{className:"w-4 h-4"}),"Unblock"]}):(0,t.jsxs)(t.Fragment,{children:["friends"===A?(0,t.jsxs)("button",{className:"px-4 py-2.5 bg-[#334155] hover:bg-[#475569] rounded-xl font-semibold text-sm transition-colors flex items-center justify-center gap-1.5",children:[(0,t.jsx)(o,{className:"w-4 h-4"}),"Friends"]}):"incoming"===A?(0,t.jsxs)("button",{onClick:ew,className:"px-4 py-2.5 bg-green-600 hover:bg-green-500 rounded-xl font-semibold text-sm transition-all flex items-center justify-center gap-1.5",children:[(0,t.jsx)(o,{className:"w-4 h-4"}),"Accept"]}):"pending"===A?(0,t.jsxs)("button",{disabled:!0,className:"px-4 py-2.5 bg-[#334155] rounded-xl font-semibold text-sm flex items-center justify-center gap-1.5 opacity-60 cursor-not-allowed",children:[(0,t.jsx)(d.Loader2,{className:"w-4 h-4 animate-spin"}),"Sent"]}):(0,t.jsxs)("button",{onClick:eN,disabled:H,className:"px-4 py-2.5 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 rounded-xl font-semibold text-sm transition-all flex items-center justify-center gap-1.5",children:[H?(0,t.jsx)(d.Loader2,{className:"w-4 h-4 animate-spin"}):(0,t.jsx)(i.UserPlus,{className:"w-4 h-4"}),H?"...":"Add Friend"]}),(0,t.jsx)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("open-chat",{detail:v}))},className:"p-2.5 bg-[#1e293b] hover:bg-[#334155] rounded-xl transition-colors",title:"Message",children:(0,t.jsx)(m.MessageCircle,{className:"w-5 h-5 text-blue-400"})}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("button",{onClick:()=>Q(!K),className:"p-2.5 bg-[#334155] hover:bg-[#475569] rounded-xl transition-colors",children:(0,t.jsx)(x.MoreVertical,{className:"w-5 h-5"})}),K&&(0,t.jsx)("div",{className:"absolute right-0 mt-1.5 w-44 bg-[#1e293b] border border-[#334155] rounded-xl shadow-2xl overflow-hidden z-10 py-1",children:(0,t.jsxs)("button",{onClick:ek,className:"w-full px-3 py-2.5 text-left hover:bg-red-500/10 transition-colors flex items-center gap-2 text-red-500 text-sm font-semibold",children:[(0,t.jsx)(u,{className:"w-3.5 h-3.5"}),"Block User"]})})]})]})})})]})})]})}),(0,t.jsxs)("div",{className:"px-4 sm:px-6 pb-4",children:[(0,t.jsx)("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-sm font-medium mb-3",children:(0,t.jsxs)("div",{className:"flex items-center gap-1.5 text-[#94a3b8] bg-[#1e293b] px-2 py-0.5 rounded-lg",children:[(0,t.jsx)(h.Star,{className:"w-3.5 h-3.5 text-yellow-500 fill-yellow-500"}),(0,t.jsx)("span",{className:"text-white font-bold",children:v.reputation||0}),(0,t.jsx)("span",{className:"text-xs",children:"Rep"})]})}),v.bio&&(0,t.jsx)("p",{className:"text-sm text-[#94a3b8] max-w-2xl mb-4 leading-relaxed",children:v.bio}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center gap-3 sm:gap-4 text-xs text-[#64748b]",children:[(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(a.Calendar,{className:"w-3.5 h-3.5 text-[#64748b]"}),(0,t.jsxs)("span",{children:["Joined ",new Date(v.createdAt).toLocaleDateString("en-US",{month:"short",year:"numeric"})]})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(r.Edit2,{className:"w-3.5 h-3.5 text-[#64748b]"}),(0,t.jsx)("span",{className:"font-semibold text-white",children:v._count.posts}),(0,t.jsx)("span",{children:1===v._count.posts?"Post":"Posts"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-1.5",children:[(0,t.jsx)(o,{className:"w-3.5 h-3.5 text-[#64748b]"}),(0,t.jsx)("span",{className:"font-semibold text-white",children:v._count.friends}),(0,t.jsx)("span",{children:1===v._count.friends?"Friend":"Friends"})]})]})]}),(0,t.jsx)("div",{className:"flex gap-4 sm:gap-6 px-4 sm:px-6 pb-3",children:[{id:"posts",label:"Posts"},{id:"about",label:"About"}].map(e=>(0,t.jsxs)("button",{onClick:()=>I(e.id),className:`pb-3 text-xs sm:text-sm font-bold uppercase tracking-wider transition-all relative ${O===e.id?"text-blue-400":"text-[#64748b] hover:text-[#94a3b8]"}`,children:[e.label,O===e.id&&(0,t.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-0.5 bg-blue-500 rounded-full"})]},e.id))}),(0,t.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-[minmax(0,1fr)_320px] gap-6",children:[(0,t.jsx)("div",{className:"min-w-0",children:"posts"===O?(0,t.jsxs)("div",{className:"space-y-5",children:[L&&(0,t.jsx)(k.default,{onPostCreated:e=>{if(e){let t={...e,_count:{likes:0,comments:0},author:{...e.author,id:e.authorId}};M(e=>[t,...e])}else ey()}}),U.length>0?U.map(e=>(0,t.jsx)(j.default,{post:e,isGuest:!z,onDelete:e=>{e?M(t=>t.filter(t=>t.id!==e)):ey()},onUpdate:ey,onEdit:e=>{ee(e),es(!0)},onViewComments:e=>{(z||L)&&(ee(e),es(!0))}},e.id)):(0,t.jsxs)("div",{className:"text-center py-16 bg-[#1e293b]/20 rounded-2xl border border-dashed border-[#334155]/50 flex flex-col items-center gap-3",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-[#1e293b] rounded-full flex items-center justify-center border border-[#334155]",children:(0,t.jsx)(c.Image,{className:"w-6 h-6 text-[#334155]"})}),(0,t.jsx)("p",{className:"text-sm text-[#64748b] font-medium",children:"No posts yet"})]})]}):(0,t.jsxs)("div",{className:"bg-[#1e293b]/30 border border-[#334155]/60 rounded-2xl p-6 shadow-lg",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start mb-6",children:[(0,t.jsxs)("h3",{className:"font-bold text-lg",children:["About ",v.displayName||v.username]}),L&&(0,t.jsxs)("button",{onClick:()=>$(!0),className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 rounded-xl font-semibold text-xs transition-all flex items-center gap-1.5 shadow-lg shadow-blue-500/20",children:[(0,t.jsx)(r.Edit2,{className:"w-3.5 h-3.5"}),"Edit Profile"]})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3 text-[#94a3b8]",children:[(0,t.jsx)("div",{className:"w-9 h-9 bg-[#1e293b] rounded-lg flex items-center justify-center border border-[#334155]/50 flex-shrink-0",children:(0,t.jsx)(u,{className:"w-4 h-4 text-[#64748b]"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-wider text-[#64748b]",children:"Email"}),(0,t.jsx)("p",{className:"text-sm text-white truncate",children:v.email})]})]}),v.bio&&(0,t.jsxs)("div",{className:"flex items-start gap-3 text-[#94a3b8]",children:[(0,t.jsx)("div",{className:"w-9 h-9 bg-[#1e293b] rounded-lg flex items-center justify-center border border-[#334155]/50 flex-shrink-0",children:(0,t.jsx)(r.Edit2,{className:"w-4 h-4 text-[#64748b]"})}),(0,t.jsxs)("div",{className:"min-w-0",children:[(0,t.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-wider text-[#64748b]",children:"Bio"}),(0,t.jsx)("p",{className:"text-sm text-white whitespace-pre-wrap leading-relaxed",children:v.bio})]})]})]})]})}),(0,t.jsx)("aside",{className:"hidden xl:block",children:(0,t.jsx)("div",{className:"sticky top-20 space-y-4",children:(0,t.jsx)(N.default,{})})})]}),(0,t.jsx)(y,{isOpen:F,onClose:()=>{$(!1),ei(null),eo(null)},currentUser:z,onUpdate:ey,initialAvatar:er,initialCover:en}),Z&&(0,t.jsx)(C.default,{isOpen:et,onClose:()=>{es(!1),ee(null)},post:Z,currentUserId:z?.id,onUpdate:ey,onDelete:ey})]}):(0,t.jsx)("div",{className:"min-h-screen bg-[#0f172a] flex items-center justify-center",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"User not found"}),(0,t.jsx)("button",{onClick:()=>n.push("/"),className:"text-blue-500 hover:underline",children:"Go back home"})]})})}e.s(["default",()=>S],31034)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,48256,64659,e=>{"use strict";var r=e.i(75254);let n=(0,r.default)("globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);e.s(["Globe",()=>n],48256);let l=(0,r.default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDown",()=>l],64659)},13385,e=>{"use strict";let r;function n(e,r){return new Promise(function(n,a){let s;return l(e).then(function(e){try{return s=e,n(new Blob([r.slice(0,2),s,r.slice(2)],{type:"image/jpeg"}))}catch(e){return a(e)}},a)})}let l=e=>new Promise((r,n)=>{let l=new FileReader;l.addEventListener("load",({target:{result:e}})=>{let l=new DataView(e),a=0;if(65496!==l.getUint16(a))return n("not a valid JPEG");for(a+=2;;){let s=l.getUint16(a);if(65498===s)break;let i=l.getUint16(a+2);if(65505===s&&0x45786966===l.getUint32(a+4)){let s,o=a+10;switch(l.getUint16(o)){case 18761:s=!0;break;case 19789:s=!1;break;default:return n("TIFF header contains invalid endian")}if(42!==l.getUint16(o+2,s))return n("TIFF header contains invalid version");let c=l.getUint32(o+4,s),d=o+c+2+12*l.getUint16(o+c,s);for(let e=o+c+2;e<d;e+=12)if(274==l.getUint16(e,s)){if(3!==l.getUint16(e+2,s))return n("Orientation data type is invalid");if(1!==l.getUint32(e+4,s))return n("Orientation data count is invalid");l.setUint16(e+8,1,s);break}return r(e.slice(a,a+2+i))}a+=2+i}return r(new Blob)}),l.readAsArrayBuffer(e)});var a,s,i,o,c={};({get exports(){return c},set exports(t){c=t}}).exports=i={},i.parse=function(e,r){for(var n=i.bin.readUshort,l=i.bin.readUint,a=0,s={},o=new Uint8Array(e),c=o.length-4;0x6054b50!=l(o,c);)c--;var d=n(o,a=c+4+4);n(o,a+=2);var u=l(o,a+=2),f=l(o,a+=4);a+=4,a=f;for(var h=0;h<d;h++){l(o,a),a+=4,a+=4,a+=4,l(o,a+=4),u=l(o,a+=4);var m=l(o,a+=4),x=n(o,a+=4),p=n(o,a+2),b=n(o,a+4);a+=6;var g=l(o,a+=8);a+=4,a+=x+p+b,i._readLocal(o,g,s,u,m,r)}return s},i._readLocal=function(e,r,n,l,a,s){var o=i.bin.readUshort,c=i.bin.readUint;c(e,r),o(e,r+=4),o(e,r+=2);var d=o(e,r+=2);c(e,r+=2),c(e,r+=4),r+=4;var u=o(e,r+=8),f=o(e,r+=2);r+=2;var h=i.bin.readUTF8(e,r,u);if(r+=u,r+=f,s)n[h]={size:a,csize:l};else{var m=new Uint8Array(e.buffer,r);if(0==d)n[h]=new Uint8Array(m.buffer.slice(r,r+l));else{if(8!=d)throw"unknown compression method: "+d;var x=new Uint8Array(a);i.inflateRaw(m,x),n[h]=x}}},i.inflateRaw=function(e,r){return i.F.inflate(e,r)},i.inflate=function(e,r){return e[0],e[1],i.inflateRaw(new Uint8Array(e.buffer,e.byteOffset+2,e.length-6),r)},i.deflate=function(e,r){null==r&&(r={level:6});var n=0,l=new Uint8Array(50+Math.floor(1.1*e.length));l[n]=120,l[n+1]=156,n+=2,n=i.F.deflateRaw(e,l,n,r.level);var a=i.adler(e,0,e.length);return l[n+0]=a>>>24&255,l[n+1]=a>>>16&255,l[n+2]=a>>>8&255,l[n+3]=a>>>0&255,new Uint8Array(l.buffer,0,n+4)},i.deflateRaw=function(e,r){null==r&&(r={level:6});var n=new Uint8Array(50+Math.floor(1.1*e.length)),l=i.F.deflateRaw(e,n,l,r.level);return new Uint8Array(n.buffer,0,l)},i.encode=function(e,r){null==r&&(r=!1);var n=0,l=i.bin.writeUint,a=i.bin.writeUshort,s={};for(var o in e){var c=!i._noNeed(o)&&!r,d=e[o],u=i.crc.crc(d,0,d.length);s[o]={cpr:c,usize:d.length,crc:u,file:c?i.deflateRaw(d):d}}for(var o in s)n+=s[o].file.length+30+46+2*i.bin.sizeUTF8(o);var f=new Uint8Array(n+=22),h=0,m=[];for(var o in s){var x=s[o];m.push(h),h=i._writeHeader(f,h,o,x,0)}var p=0,b=h;for(var o in s)x=s[o],m.push(h),h=i._writeHeader(f,h,o,x,1,m[p++]);var g=h-b;return l(f,h,0x6054b50),h+=4,a(f,h+=4,p),a(f,h+=2,p),l(f,h+=2,g),l(f,h+=4,b),h+=4,h+=2,f.buffer},i._noNeed=function(e){var r=e.split(".").pop().toLowerCase();return -1!="png,jpg,jpeg,zip".indexOf(r)},i._writeHeader=function(e,r,n,l,a,s){var o=i.bin.writeUint,c=i.bin.writeUshort,d=l.file;return o(e,r,0==a?0x4034b50:0x2014b50),r+=4,1==a&&(r+=2),c(e,r,20),c(e,r+=2,0),c(e,r+=2,8*!!l.cpr),o(e,r+=2,0),o(e,r+=4,l.crc),o(e,r+=4,d.length),o(e,r+=4,l.usize),c(e,r+=4,i.bin.sizeUTF8(n)),c(e,r+=2,0),r+=2,1==a&&(r+=2,r+=2,o(e,r+=6,s),r+=4),r+=i.bin.writeUTF8(e,r,n),0==a&&(e.set(d,r),r+=d.length),r},i.crc={table:function(){for(var e=new Uint32Array(256),r=0;r<256;r++){for(var n=r,l=0;l<8;l++)1&n?n=0xedb88320^n>>>1:n>>>=1;e[r]=n}return e}(),update:function(e,r,n,l){for(var a=0;a<l;a++)e=i.crc.table[255&(e^r[n+a])]^e>>>8;return e},crc:function(e,r,n){return 0xffffffff^i.crc.update(0xffffffff,e,r,n)}},i.adler=function(e,r,n){for(var l=1,a=0,s=r,i=r+n;s<i;){for(var o=Math.min(s+5552,i);s<o;)a+=l+=e[s++];l%=65521,a%=65521}return a<<16|l},i.bin={readUshort:function(e,r){return e[r]|e[r+1]<<8},writeUshort:function(e,r,n){e[r]=255&n,e[r+1]=n>>8&255},readUint:function(e,r){return 0x1000000*e[r+3]+(e[r+2]<<16|e[r+1]<<8|e[r])},writeUint:function(e,r,n){e[r]=255&n,e[r+1]=n>>8&255,e[r+2]=n>>16&255,e[r+3]=n>>24&255},readASCII:function(e,r,n){for(var l="",a=0;a<n;a++)l+=String.fromCharCode(e[r+a]);return l},writeASCII:function(e,r,n){for(var l=0;l<n.length;l++)e[r+l]=n.charCodeAt(l)},pad:function(e){return e.length<2?"0"+e:e},readUTF8:function(e,r,n){for(var l,a="",s=0;s<n;s++)a+="%"+i.bin.pad(e[r+s].toString(16));try{l=decodeURIComponent(a)}catch(l){return i.bin.readASCII(e,r,n)}return l},writeUTF8:function(e,r,n){for(var l=n.length,a=0,s=0;s<l;s++){var i=n.charCodeAt(s);if(0==(0xffffff80&i))e[r+a]=i,a++;else if(0==(0xfffff800&i))e[r+a]=192|i>>6,e[r+a+1]=128|63&i,a+=2;else if(0==(0xffff0000&i))e[r+a]=224|i>>12,e[r+a+1]=128|i>>6&63,e[r+a+2]=128|63&i,a+=3;else{if(0!=(0xffe00000&i))throw"e";e[r+a]=240|i>>18,e[r+a+1]=128|i>>12&63,e[r+a+2]=128|i>>6&63,e[r+a+3]=128|63&i,a+=4}}return a},sizeUTF8:function(e){for(var r=e.length,n=0,l=0;l<r;l++){var a=e.charCodeAt(l);if(0==(0xffffff80&a))n++;else if(0==(0xfffff800&a))n+=2;else if(0==(0xffff0000&a))n+=3;else{if(0!=(0xffe00000&a))throw"e";n+=4}}return n}},i.F={},i.F.deflateRaw=function(e,r,n,l){var a=[[0,0,0,0,0],[4,4,8,4,0],[4,5,16,8,0],[4,6,16,16,0],[4,10,16,32,0],[8,16,32,32,0],[8,16,128,128,0],[8,32,128,256,0],[32,128,258,1024,1],[32,258,258,4096,1]][l],s=i.F.U,o=i.F._goodIndex;i.F._hash;var c=i.F._putsE,d=0,u=n<<3,f=0,h=e.length;if(0==l){for(;d<h;)c(r,u,+(d+(k=Math.min(65535,h-d))==h)),u=i.F._copyExact(e,d,k,r,u+8),d+=k;return u>>>3}var m=s.lits,x=s.strt,p=s.prev,b=0,g=0,v=0,w=0,y=0,j=0;for(h>2&&(x[j=i.F._hash(e,0)]=0),d=0;d<h;d++){if(y=j,d+1<h-2){j=i.F._hash(e,d+1);var N=d+1&32767;p[N]=x[j],x[j]=N}if(f<=d){(b>14e3||g>26697)&&h-d>100&&(f<d&&(m[b]=d-f,b+=2,f=d),u=i.F._writeBlock(+(d==h-1||f==h),m,b,w,e,v,d-v,r,u),b=g=w=0,v=d);var A=0;d<h-2&&(A=i.F._bestMatch(e,d,p,y,Math.min(a[2],h-d),a[3]));var k=A>>>16,U=65535&A;if(0!=A){U=65535&A;var C=o(k=A>>>16,s.of0);s.lhst[257+C]++;var F=o(U,s.df0);s.dhst[F]++,w+=s.exb[C]+s.dxb[F],m[b]=k<<23|d-f,m[b+1]=U<<16|C<<8|F,b+=2,f=d+k}else s.lhst[e[d]]++;g++}}for(v==d&&0!=e.length||(f<d&&(m[b]=d-f,b+=2,f=d),u=i.F._writeBlock(1,m,b,w,e,v,d-v,r,u),b=0,g=0,b=g=w=0,v=d);0!=(7&u);)u++;return u>>>3},i.F._bestMatch=function(e,r,n,l,a,s){var o=32767&r,c=n[o],d=o-c+32768&32767;if(c==o||l!=i.F._hash(e,r-d))return 0;for(var u=0,f=0,h=Math.min(32767,r);d<=h&&0!=--s&&c!=o;){if(0==u||e[r+u]==e[r+u-d]){var m=i.F._howLong(e,r,d);if(m>u){if(f=d,(u=m)>=a)break;d+2<m&&(m=d+2);for(var x=0,p=0;p<m-2;p++){var b=r-d+p+32768&32767,g=b-n[b]+32768&32767;g>x&&(x=g,c=b)}}}d+=(o=c)-(c=n[o])+32768&32767}return u<<16|f},i.F._howLong=function(e,r,n){if(e[r]!=e[r-n]||e[r+1]!=e[r+1-n]||e[r+2]!=e[r+2-n])return 0;var l=r,a=Math.min(e.length,r+258);for(r+=3;r<a&&e[r]==e[r-n];)r++;return r-l},i.F._hash=function(e,r){return(e[r]<<8|e[r+1])+(e[r+2]<<4)&65535},i.saved=0,i.F._writeBlock=function(e,r,n,l,a,s,o,c,d){var u,f,h,m,x,p,b,g,v,w,y,j=i.F.U,N=i.F._putsF,A=i.F._putsE;j.lhst[256]++,m=(h=i.F.getTrees())[0],x=h[1],p=h[2],b=h[3],g=h[4],v=h[5],w=h[6],y=h[7];var k=32+(0==(d+3&7)?0:8-(d+3&7))+(o<<3),U=l+i.F.contSize(j.fltree,j.lhst)+i.F.contSize(j.fdtree,j.dhst),C=l+i.F.contSize(j.ltree,j.lhst)+i.F.contSize(j.dtree,j.dhst);C+=14+3*v+i.F.contSize(j.itree,j.ihst)+(2*j.ihst[16]+3*j.ihst[17]+7*j.ihst[18]);for(var F=0;F<286;F++)j.lhst[F]=0;for(F=0;F<30;F++)j.dhst[F]=0;for(F=0;F<19;F++)j.ihst[F]=0;var S=k<U&&k<C?0:U<C?1:2;if(N(c,d,e),N(c,d+1,S),d+=3,0==S){for(;0!=(7&d);)d++;d=i.F._copyExact(a,s,o,c,d)}else{if(1==S&&(u=j.fltree,f=j.fdtree),2==S){i.F.makeCodes(j.ltree,m),i.F.revCodes(j.ltree,m),i.F.makeCodes(j.dtree,x),i.F.revCodes(j.dtree,x),i.F.makeCodes(j.itree,p),i.F.revCodes(j.itree,p),u=j.ltree,f=j.dtree,A(c,d,b-257),A(c,d+=5,g-1),A(c,d+=5,v-4),d+=4;for(var E=0;E<v;E++)A(c,d+3*E,j.itree[1+(j.ordr[E]<<1)]);d+=3*v,d=i.F._codeTiny(w,j.itree,c,d),d=i.F._codeTiny(y,j.itree,c,d)}for(var M=s,_=0;_<n;_+=2){for(var I=r[_],R=I>>>23,T=M+(8388607&I);M<T;)d=i.F._writeLit(a[M++],u,c,d);if(0!=R){var B=r[_+1],L=B>>16,P=B>>8&255,z=255&B;A(c,d=i.F._writeLit(257+P,u,c,d),R-j.of0[P]),d+=j.exb[P],N(c,d=i.F._writeLit(z,f,c,d),L-j.df0[z]),d+=j.dxb[z],M+=R}}d=i.F._writeLit(256,u,c,d)}return d},i.F._copyExact=function(e,r,n,l,a){var s=a>>>3;return l[s]=n,l[s+1]=n>>>8,l[s+2]=255-l[s],l[s+3]=255-l[s+1],s+=4,l.set(new Uint8Array(e.buffer,r,n),s),a+(n+4<<3)},i.F.getTrees=function(){for(var e=i.F.U,r=i.F._hufTree(e.lhst,e.ltree,15),n=i.F._hufTree(e.dhst,e.dtree,15),l=[],a=i.F._lenCodes(e.ltree,l),s=[],o=i.F._lenCodes(e.dtree,s),c=0;c<l.length;c+=2)e.ihst[l[c]]++;for(c=0;c<s.length;c+=2)e.ihst[s[c]]++;for(var d=i.F._hufTree(e.ihst,e.itree,7),u=19;u>4&&0==e.itree[1+(e.ordr[u-1]<<1)];)u--;return[r,n,d,a,o,u,l,s]},i.F.getSecond=function(e){for(var r=[],n=0;n<e.length;n+=2)r.push(e[n+1]);return r},i.F.nonZero=function(e){for(var r="",n=0;n<e.length;n+=2)0!=e[n+1]&&(r+=(n>>1)+",");return r},i.F.contSize=function(e,r){for(var n=0,l=0;l<r.length;l++)n+=r[l]*e[1+(l<<1)];return n},i.F._codeTiny=function(e,r,n,l){for(var a=0;a<e.length;a+=2){var s=e[a],o=e[a+1];l=i.F._writeLit(s,r,n,l);var c=16==s?2:17==s?3:7;s>15&&(i.F._putsE(n,l,o,c),l+=c)}return l},i.F._lenCodes=function(e,r){for(var n=e.length;2!=n&&0==e[n-1];)n-=2;for(var l=0;l<n;l+=2){var a=e[l+1],s=l+3<n?e[l+3]:-1,i=l+5<n?e[l+5]:-1,o=0==l?-1:e[l-1];if(0==a&&s==a&&i==a){for(var c=l+5;c+2<n&&e[c+2]==a;)c+=2;(d=Math.min(c+1-l>>>1,138))<11?r.push(17,d-3):r.push(18,d-11),l+=2*d-2}else if(a==o&&s==a&&i==a){for(c=l+5;c+2<n&&e[c+2]==a;)c+=2;var d=Math.min(c+1-l>>>1,6);r.push(16,d-3),l+=2*d-2}else r.push(a,0)}return n>>>1},i.F._hufTree=function(e,r,n){var l=[],a=e.length,s=r.length,o=0;for(o=0;o<s;o+=2)r[o]=0,r[o+1]=0;for(o=0;o<a;o++)0!=e[o]&&l.push({lit:o,f:e[o]});var c=l.length,d=l.slice(0);if(0==c)return 0;if(1==c){var u=l[0].lit;return d=+(0==u),r[1+(u<<1)]=1,r[1+(d<<1)]=1,1}l.sort(function(e,r){return e.f-r.f});var f=l[0],h=l[1],m=0,x=1,p=2;for(l[0]={lit:-1,f:f.f+h.f,l:f,r:h,d:0};x!=c-1;)f=m!=x&&(p==c||l[m].f<l[p].f)?l[m++]:l[p++],h=m!=x&&(p==c||l[m].f<l[p].f)?l[m++]:l[p++],l[x++]={lit:-1,f:f.f+h.f,l:f,r:h};var b=i.F.setDepth(l[x-1],0);for(b>n&&(i.F.restrictDepth(d,n,b),b=n),o=0;o<c;o++)r[1+(d[o].lit<<1)]=d[o].d;return b},i.F.setDepth=function(e,r){return -1!=e.lit?(e.d=r,r):Math.max(i.F.setDepth(e.l,r+1),i.F.setDepth(e.r,r+1))},i.F.restrictDepth=function(e,r,n){var l=0,a=1<<n-r,s=0;for(e.sort(function(e,r){return r.d==e.d?e.f-r.f:r.d-e.d}),l=0;l<e.length&&e[l].d>r;l++){var i=e[l].d;e[l].d=r,s+=a-(1<<n-i)}for(s>>>=n-r;s>0;)(i=e[l].d)<r?(e[l].d++,s-=1<<r-i-1):l++;for(;l>=0;l--)e[l].d==r&&s<0&&(e[l].d--,s++);0!=s&&console.log("debt left")},i.F._goodIndex=function(e,r){var n=0;return r[16]<=e&&(n|=16),r[8|n]<=e&&(n|=8),r[4|n]<=e&&(n|=4),r[2|n]<=e&&(n|=2),r[1|n]<=e&&(n|=1),n},i.F._writeLit=function(e,r,n,l){return i.F._putsF(n,l,r[e<<1]),l+r[1+(e<<1)]},i.F.inflate=function(e,r){var n=Uint8Array;if(3==e[0]&&0==e[1])return r||new n(0);var l=i.F,a=l._bitsF,s=l._bitsE,o=l._decodeTiny,c=l.makeCodes,d=l.codes2map,u=l._get17,f=l.U,h=null==r;h&&(r=new n(e.length>>>2<<3));for(var m,x,p=0,b=0,g=0,v=0,w=0,y=0,j=0,N=0,A=0;0==p;)if(p=a(e,A,1),b=a(e,A+1,2),A+=3,0!=b){if(h&&(r=i.F._check(r,N+131072)),1==b&&(m=f.flmap,x=f.fdmap,y=511,j=31),2==b){g=s(e,A,5)+257,v=s(e,A+5,5)+1,w=s(e,A+10,4)+4,A+=14;for(var k=0;k<38;k+=2)f.itree[k]=0,f.itree[k+1]=0;var U=1;for(k=0;k<w;k++){var C=s(e,A+3*k,3);f.itree[1+(f.ordr[k]<<1)]=C,C>U&&(U=C)}A+=3*w,c(f.itree,U),d(f.itree,U,f.imap),m=f.lmap,x=f.dmap,A=o(f.imap,(1<<U)-1,g+v,e,A,f.ttree);var F=l._copyOut(f.ttree,0,g,f.ltree);y=(1<<F)-1;var S=l._copyOut(f.ttree,g,v,f.dtree);j=(1<<S)-1,c(f.ltree,F),d(f.ltree,F,m),c(f.dtree,S),d(f.dtree,S,x)}for(;;){var E=m[u(e,A)&y];A+=15&E;var M=E>>>4;if(M>>>8==0)r[N++]=M;else{if(256==M)break;var _=N+M-254;if(M>264){var I=f.ldef[M-257];_=N+(I>>>3)+s(e,A,7&I),A+=7&I}var R=x[u(e,A)&j];A+=15&R;var T=R>>>4,B=f.ddef[T],L=(B>>>4)+a(e,A,15&B);for(A+=15&B,h&&(r=i.F._check(r,N+131072));N<_;)r[N]=r[N++-L],r[N]=r[N++-L],r[N]=r[N++-L],r[N]=r[N++-L];N=_}}}else{0!=(7&A)&&(A+=8-(7&A));var P=4+(A>>>3),z=e[P-4]|e[P-3]<<8;h&&(r=i.F._check(r,N+z)),r.set(new n(e.buffer,e.byteOffset+P,z),N),A=P+z<<3,N+=z}return r.length==N?r:r.slice(0,N)},i.F._check=function(e,r){var n=e.length;if(r<=n)return e;var l=new Uint8Array(Math.max(n<<1,r));return l.set(e,0),l},i.F._decodeTiny=function(e,r,n,l,a,s){for(var o=i.F._bitsE,c=i.F._get17,d=0;d<n;){var u=e[c(l,a)&r];a+=15&u;var f=u>>>4;if(f<=15)s[d]=f,d++;else{var h=0,m=0;16==f?(m=3+o(l,a,2),a+=2,h=s[d-1]):17==f?(m=3+o(l,a,3),a+=3):18==f&&(m=11+o(l,a,7),a+=7);for(var x=d+m;d<x;)s[d]=h,d++}}return a},i.F._copyOut=function(e,r,n,l){for(var a=0,s=0,i=l.length>>>1;s<n;){var o=e[s+r];l[s<<1]=0,l[1+(s<<1)]=o,o>a&&(a=o),s++}for(;s<i;)l[s<<1]=0,l[1+(s<<1)]=0,s++;return a},i.F.makeCodes=function(e,r){for(var n,l,a,s,o=i.F.U,c=e.length,d=o.bl_count,u=0;u<=r;u++)d[u]=0;for(u=1;u<c;u+=2)d[e[u]]++;var f=o.next_code;for(n=0,d[0]=0,l=1;l<=r;l++)n=n+d[l-1]<<1,f[l]=n;for(a=0;a<c;a+=2)0!=(s=e[a+1])&&(e[a]=f[s],f[s]++)},i.F.codes2map=function(e,r,n){for(var l=e.length,a=i.F.U.rev15,s=0;s<l;s+=2)if(0!=e[s+1])for(var o=s>>1,c=e[s+1],d=o<<4|c,u=r-c,f=e[s]<<u,h=f+(1<<u);f!=h;)n[a[f]>>>15-r]=d,f++},i.F.revCodes=function(e,r){for(var n=i.F.U.rev15,l=15-r,a=0;a<e.length;a+=2){var s=e[a]<<r-e[a+1];e[a]=n[s]>>>l}},i.F._putsE=function(e,r,n){n<<=7&r;var l=r>>>3;e[l]|=n,e[l+1]|=n>>>8},i.F._putsF=function(e,r,n){n<<=7&r;var l=r>>>3;e[l]|=n,e[l+1]|=n>>>8,e[l+2]|=n>>>16},i.F._bitsE=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<n)-1},i.F._bitsF=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<n)-1},i.F._get17=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},i.F._get25=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},i.F.U=(a=Uint16Array,s=Uint32Array,{next_code:new a(16),bl_count:new a(16),ordr:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],of0:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],exb:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],ldef:new a(32),df0:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],dxb:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],ddef:new s(32),flmap:new a(512),fltree:[],fdmap:new a(32),fdtree:[],lmap:new a(32768),ltree:[],ttree:[],dmap:new a(32768),dtree:[],imap:new a(512),itree:[],rev15:new a(32768),lhst:new s(286),dhst:new s(30),ihst:new s(19),lits:new s(15e3),strt:new a(65536),prev:new a(32768)}),function(){for(var e=i.F.U,r=0;r<32768;r++){var n=r;n=(0xff00ff00&(n=(0xf0f0f0f0&(n=(0xcccccccc&(n=(0xaaaaaaaa&n)>>>1|(0x55555555&n)<<1))>>>2|(0x33333333&n)<<2))>>>4|(0xf0f0f0f&n)<<4))>>>8|(0xff00ff&n)<<8,e.rev15[r]=(n>>>16|n<<16)>>>17}function l(e,r,n){for(;0!=r--;)e.push(0,n)}for(r=0;r<32;r++)e.ldef[r]=e.of0[r]<<3|e.exb[r],e.ddef[r]=e.df0[r]<<4|e.dxb[r];l(e.fltree,144,8),l(e.fltree,112,9),l(e.fltree,24,7),l(e.fltree,8,8),i.F.makeCodes(e.fltree,9),i.F.codes2map(e.fltree,9,e.flmap),i.F.revCodes(e.fltree,9),l(e.fdtree,32,5),i.F.makeCodes(e.fdtree,5),i.F.codes2map(e.fdtree,5,e.fdmap),i.F.revCodes(e.fdtree,5),l(e.itree,19,0),l(e.ltree,286,0),l(e.dtree,30,0),l(e.ttree,320,0)}();var d=(o={__proto__:null,default:c},[c].forEach(function(e){e&&"string"!=typeof e&&!Array.isArray(e)&&Object.keys(e).forEach(function(r){if("default"!==r&&!(r in o)){var n=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(o,r,n.get?n:{enumerable:!0,get:function(){return e[r]}})}})}),Object.freeze(o));let u=function(){let e,r,n;var l={nextZero(e,r){for(;0!=e[r];)r++;return r},readUshort:(e,r)=>e[r]<<8|e[r+1],writeUshort(e,r,n){e[r]=n>>8&255,e[r+1]=255&n},readUint:(e,r)=>0x1000000*e[r]+(e[r+1]<<16|e[r+2]<<8|e[r+3]),writeUint(e,r,n){e[r]=n>>24&255,e[r+1]=n>>16&255,e[r+2]=n>>8&255,e[r+3]=255&n},readASCII(e,r,n){let l="";for(let a=0;a<n;a++)l+=String.fromCharCode(e[r+a]);return l},writeASCII(e,r,n){for(let l=0;l<n.length;l++)e[r+l]=n.charCodeAt(l)},readBytes(e,r,n){let l=[];for(let a=0;a<n;a++)l.push(e[r+a]);return l},pad:e=>e.length<2?`0${e}`:e,readUTF8(e,r,n){let a,s="";for(let a=0;a<n;a++)s+=`%${l.pad(e[r+a].toString(16))}`;try{a=decodeURIComponent(s)}catch(a){return l.readASCII(e,r,n)}return a}};function a(e,r,n,a){let s=r*n,i=Math.ceil(r*c(a)/8),o=new Uint8Array(4*s),d=new Uint32Array(o.buffer),{ctype:u}=a,{depth:f}=a,h=l.readUshort;if(6==u){let r=s<<2;if(8==f)for(var m=0;m<r;m+=4)o[m]=e[m],o[m+1]=e[m+1],o[m+2]=e[m+2],o[m+3]=e[m+3];if(16==f)for(m=0;m<r;m++)o[m]=e[m<<1]}else if(2==u){let r=a.tabs.tRNS;if(null==r){if(8==f)for(m=0;m<s;m++){var x=3*m;d[m]=-0x1000000|e[x+2]<<16|e[x+1]<<8|e[x]}if(16==f)for(m=0;m<s;m++)x=6*m,d[m]=-0x1000000|e[x+4]<<16|e[x+2]<<8|e[x]}else{var p=r[0];let n=r[1],l=r[2];if(8==f)for(m=0;m<s;m++){var b=m<<2;x=3*m,d[m]=-0x1000000|e[x+2]<<16|e[x+1]<<8|e[x],e[x]==p&&e[x+1]==n&&e[x+2]==l&&(o[b+3]=0)}if(16==f)for(m=0;m<s;m++)b=m<<2,x=6*m,d[m]=-0x1000000|e[x+4]<<16|e[x+2]<<8|e[x],h(e,x)==p&&h(e,x+2)==n&&h(e,x+4)==l&&(o[b+3]=0)}}else if(3==u){let l=a.tabs.PLTE,c=a.tabs.tRNS,d=c?c.length:0;if(1==f)for(var g,v=0;v<n;v++){var w=v*i,y=v*r;for(m=0;m<r;m++){b=y+m<<2;var j=3*(g=e[w+(m>>3)]>>7-(7&m)&1);o[b]=l[j],o[b+1]=l[j+1],o[b+2]=l[j+2],o[b+3]=g<d?c[g]:255}}if(2==f)for(v=0;v<n;v++)for(w=v*i,y=v*r,m=0;m<r;m++)b=y+m<<2,j=3*(g=e[w+(m>>2)]>>6-((3&m)<<1)&3),o[b]=l[j],o[b+1]=l[j+1],o[b+2]=l[j+2],o[b+3]=g<d?c[g]:255;if(4==f)for(v=0;v<n;v++)for(w=v*i,y=v*r,m=0;m<r;m++)b=y+m<<2,j=3*(g=e[w+(m>>1)]>>4-((1&m)<<2)&15),o[b]=l[j],o[b+1]=l[j+1],o[b+2]=l[j+2],o[b+3]=g<d?c[g]:255;if(8==f)for(m=0;m<s;m++)b=m<<2,j=3*(g=e[m]),o[b]=l[j],o[b+1]=l[j+1],o[b+2]=l[j+2],o[b+3]=g<d?c[g]:255}else if(4==u){if(8==f)for(m=0;m<s;m++){b=m<<2;var N,A=e[N=m<<1];o[b]=A,o[b+1]=A,o[b+2]=A,o[b+3]=e[N+1]}if(16==f)for(m=0;m<s;m++)b=m<<2,A=e[N=m<<2],o[b]=A,o[b+1]=A,o[b+2]=A,o[b+3]=e[N+2]}else if(0==u)for(p=a.tabs.tRNS?a.tabs.tRNS:-1,v=0;v<n;v++){let n=v*i,l=v*r;if(1==f)for(var k=0;k<r;k++){var U=255*((A=255*(e[n+(k>>>3)]>>>7-(7&k)&1))!=255*p);d[l+k]=U<<24|A<<16|A<<8|A}else if(2==f)for(k=0;k<r;k++)U=255*((A=85*(e[n+(k>>>2)]>>>6-((3&k)<<1)&3))!=85*p),d[l+k]=U<<24|A<<16|A<<8|A;else if(4==f)for(k=0;k<r;k++)U=255*((A=17*(e[n+(k>>>1)]>>>4-((1&k)<<2)&15))!=17*p),d[l+k]=U<<24|A<<16|A<<8|A;else if(8==f)for(k=0;k<r;k++)U=255*((A=e[n+k])!=p),d[l+k]=U<<24|A<<16|A<<8|A;else if(16==f)for(k=0;k<r;k++)A=e[n+(k<<1)],U=255*(h(e,n+(k<<1))!=p),d[l+k]=U<<24|A<<16|A<<8|A}return o}function s(e,r,n,l){let a=new Uint8Array((Math.ceil(n*c(e)/8)+1+e.interlace)*l);return r=e.tabs.CgBI?o(r,a):i(r,a),0==e.interlace?r=d(r,e,0,n,l):1==e.interlace&&(r=function(e,r){let n=r.width,l=r.height,a=c(r),s=a>>3,i=Math.ceil(n*a/8),o=new Uint8Array(l*i),u=0,f=[0,0,4,0,2,0,1],h=[0,4,0,2,0,1,0],m=[8,8,8,4,4,2,2],x=[8,8,4,4,2,2,1],p=0;for(;p<7;){let c=m[p],g=x[p],v=0,w=0,y=f[p];for(;y<l;)y+=c,w++;let j=h[p];for(;j<n;)j+=g,v++;let N=Math.ceil(v*a/8);d(e,r,u,v,w);let A=0,k=f[p];for(;k<l;){let r=h[p],l=u+A*N<<3;for(;r<n;){var b;if(1==a&&(b=(b=e[l>>3])>>7-(7&l)&1,o[k*i+(r>>3)]|=b<<7-(7&r)),2==a&&(b=(b=e[l>>3])>>6-(7&l)&3,o[k*i+(r>>2)]|=b<<6-((3&r)<<1)),4==a&&(b=(b=e[l>>3])>>4-(7&l)&15,o[k*i+(r>>1)]|=b<<4-((1&r)<<2)),a>=8){let n=k*i+r*s;for(let r=0;r<s;r++)o[n+r]=e[(l>>3)+r]}l+=a,r+=g}A++,k+=c}v*w!=0&&(u+=w*(1+N)),p+=1}return o}(r,e)),r}function i(e,r){return o(new Uint8Array(e.buffer,2,e.length-6),r)}var o=((e={}).N=function(r,n){let l=Uint8Array,a,s,i=0,o=0,c=0,d=0,u=0,f=0,h=0,m=0,x=0;if(3==r[0]&&0==r[1])return n||new l(0);let p=e.b,b=e.e,g=e.R,v=e.n,w=e.A,y=e.Z,j=e.m,N=null==n;for(N&&(n=new l(r.length>>>2<<5));0==i;)if(i=p(r,x,1),o=p(r,x+1,2),x+=3,0!=o){if(N&&(n=e.W(n,m+131072)),1==o&&(a=j.J,s=j.h,f=511,h=31),2==o){c=b(r,x,5)+257,d=b(r,x+5,5)+1,u=b(r,x+10,4)+4,x+=14;let n=1;for(var A=0;A<38;A+=2)j.Q[A]=0,j.Q[A+1]=0;for(A=0;A<u;A++){let e=b(r,x+3*A,3);j.Q[1+(j.X[A]<<1)]=e,e>n&&(n=e)}x+=3*u,v(j.Q,n),w(j.Q,n,j.u),a=j.w,s=j.d,x=g(j.u,(1<<n)-1,c+d,r,x,j.v);let l=e.V(j.v,0,c,j.C);f=(1<<l)-1;let i=e.V(j.v,c,d,j.D);h=(1<<i)-1,v(j.C,l),w(j.C,l,a),v(j.D,i),w(j.D,i,s)}for(;;){let e=a[y(r,x)&f];x+=15&e;let l=e>>>4;if(l>>>8==0)n[m++]=l;else{if(256==l)break;{let e=m+l-254;if(l>264){let n=j.q[l-257];e=m+(n>>>3)+b(r,x,7&n),x+=7&n}let a=s[y(r,x)&h];x+=15&a;let i=a>>>4,o=j.c[i],c=(o>>>4)+p(r,x,15&o);for(x+=15&o;m<e;)n[m]=n[m++-c],n[m]=n[m++-c],n[m]=n[m++-c],n[m]=n[m++-c];m=e}}}}else{0!=(7&x)&&(x+=8-(7&x));let a=4+(x>>>3),s=r[a-4]|r[a-3]<<8;N&&(n=e.W(n,m+s)),n.set(new l(r.buffer,r.byteOffset+a,s),m),x=a+s<<3,m+=s}return n.length==m?n:n.slice(0,m)},e.W=function(e,r){let n=e.length;if(r<=n)return e;let l=new Uint8Array(n<<1);return l.set(e,0),l},e.R=function(r,n,l,a,s,i){let o=e.e,c=e.Z,d=0;for(;d<l;){let e=r[c(a,s)&n];s+=15&e;let l=e>>>4;if(l<=15)i[d]=l,d++;else{let e=0,r=0;16==l?(r=3+o(a,s,2),s+=2,e=i[d-1]):17==l?(r=3+o(a,s,3),s+=3):18==l&&(r=11+o(a,s,7),s+=7);let n=d+r;for(;d<n;)i[d]=e,d++}}return s},e.V=function(e,r,n,l){let a=0,s=0,i=l.length>>>1;for(;s<n;){let n=e[s+r];l[s<<1]=0,l[1+(s<<1)]=n,n>a&&(a=n),s++}for(;s<i;)l[s<<1]=0,l[1+(s<<1)]=0,s++;return a},e.n=function(r,n){let l,a,s,i,o=e.m,c=r.length,d=o.j;for(var u=0;u<=n;u++)d[u]=0;for(u=1;u<c;u+=2)d[r[u]]++;let f=o.K;for(l=0,d[0]=0,a=1;a<=n;a++)l=l+d[a-1]<<1,f[a]=l;for(s=0;s<c;s+=2)0!=(i=r[s+1])&&(r[s]=f[i],f[i]++)},e.A=function(r,n,l){let a=r.length,s=e.m.r;for(let e=0;e<a;e+=2)if(0!=r[e+1]){let a=e>>1,i=r[e+1],o=a<<4|i,c=n-i,d=r[e]<<c,u=d+(1<<c);for(;d!=u;)l[s[d]>>>15-n]=o,d++}},e.l=function(r,n){let l=e.m.r,a=15-n;for(let e=0;e<r.length;e+=2){let s=r[e]<<n-r[e+1];r[e]=l[s]>>>a}},e.M=function(e,r,n){n<<=7&r;let l=r>>>3;e[l]|=n,e[l+1]|=n>>>8},e.I=function(e,r,n){n<<=7&r;let l=r>>>3;e[l]|=n,e[l+1]|=n>>>8,e[l+2]|=n>>>16},e.e=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8)>>>(7&r)&(1<<n)-1},e.b=function(e,r,n){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)&(1<<n)-1},e.Z=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16)>>>(7&r)},e.i=function(e,r){return(e[r>>>3]|e[1+(r>>>3)]<<8|e[2+(r>>>3)]<<16|e[3+(r>>>3)]<<24)>>>(7&r)},r=Uint16Array,n=Uint32Array,e.m={K:new r(16),j:new r(16),X:[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],S:[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,999,999,999],T:[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0],q:new r(32),p:[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,65535,65535],z:[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0],c:new n(32),J:new r(512),_:[],h:new r(32),$:[],w:new r(32768),C:[],v:[],d:new r(32768),D:[],u:new r(512),Q:[],r:new r(32768),s:new n(286),Y:new n(30),a:new n(19),t:new n(15e3),k:new r(65536),g:new r(32768)},function(){let r=e.m;for(var n=0;n<32768;n++){let e=n;e=(0xff00ff00&(e=(0xf0f0f0f0&(e=(0xcccccccc&(e=(0xaaaaaaaa&e)>>>1|(0x55555555&e)<<1))>>>2|(0x33333333&e)<<2))>>>4|(0xf0f0f0f&e)<<4))>>>8|(0xff00ff&e)<<8,r.r[n]=(e>>>16|e<<16)>>>17}function l(e,r,n){for(;0!=r--;)e.push(0,n)}for(n=0;n<32;n++)r.q[n]=r.S[n]<<3|r.T[n],r.c[n]=r.p[n]<<4|r.z[n];l(r._,144,8),l(r._,112,9),l(r._,24,7),l(r._,8,8),e.n(r._,9),e.A(r._,9,r.J),e.l(r._,9),l(r.$,32,5),e.n(r.$,5),e.A(r.$,5,r.h),e.l(r.$,5),l(r.Q,19,0),l(r.C,286,0),l(r.D,30,0),l(r.v,320,0)}(),e.N);function c(e){return[1,null,3,1,2,null,4][e.ctype]*e.depth}function d(e,r,n,l,a){let s,i,o=c(r),d=Math.ceil(l*o/8);o=Math.ceil(o/8);let f=e[n],h=0;if(f>1&&(e[n]=[0,0,1][f-2]),3==f)for(h=o;h<d;h++)e[h+1]=e[h+1]+(e[h+1-o]>>>1)&255;for(let r=0;r<a;r++)if(f=e[(i=(s=n+r*d)+r+1)-1],h=0,0==f)for(;h<d;h++)e[s+h]=e[i+h];else if(1==f){for(;h<o;h++)e[s+h]=e[i+h];for(;h<d;h++)e[s+h]=e[i+h]+e[s+h-o]}else if(2==f)for(;h<d;h++)e[s+h]=e[i+h]+e[s+h-d];else if(3==f){for(;h<o;h++)e[s+h]=e[i+h]+(e[s+h-d]>>>1);for(;h<d;h++)e[s+h]=e[i+h]+(e[s+h-d]+e[s+h-o]>>>1)}else{for(;h<o;h++)e[s+h]=e[i+h]+u(0,e[s+h-d],0);for(;h<d;h++)e[s+h]=e[i+h]+u(e[s+h-o],e[s+h-d],e[s+h-o-d])}return e}function u(e,r,n){let l=e+r-n,a=l-e,s=l-r,i=l-n;return a*a<=s*s&&a*a<=i*i?e:s*s<=i*i?r:n}function f(e,r,n,l,a,s,i,o,c){let d=Math.min(r,a),u=Math.min(n,s),f=0,h=0;for(let n=0;n<u;n++)for(let s=0;s<d;s++)if(i>=0&&o>=0?(f=n*r+s<<2,h=(o+n)*a+i+s<<2):(f=(-o+n)*r-i+s<<2,h=n*a+s<<2),0==c)l[h]=e[f],l[h+1]=e[f+1],l[h+2]=e[f+2],l[h+3]=e[f+3];else if(1==c){var m=e[f+3]*(1/255),x=e[f]*m,p=e[f+1]*m,b=e[f+2]*m,g=l[h+3]*(1/255),v=l[h]*g,w=l[h+1]*g,y=l[h+2]*g;let r=1-m,n=m+g*r,a=0==n?0:1/n;l[h+3]=255*n,l[h+0]=(x+v*r)*a,l[h+1]=(p+w*r)*a,l[h+2]=(b+y*r)*a}else if(2==c)m=e[f+3],x=e[f],p=e[f+1],b=e[f+2],g=l[h+3],v=l[h],w=l[h+1],y=l[h+2],m==g&&x==v&&p==w&&b==y?(l[h]=0,l[h+1]=0,l[h+2]=0,l[h+3]=0):(l[h]=x,l[h+1]=p,l[h+2]=b,l[h+3]=m);else if(3==c){if(m=e[f+3],x=e[f],p=e[f+1],b=e[f+2],g=l[h+3],v=l[h],w=l[h+1],y=l[h+2],m==g&&x==v&&p==w&&b==y)continue;if(m<220&&g>20)return!1}return!0}return{decode:function(e){let r=new Uint8Array(e),n=8,a=l.readUshort,c=l.readUint,d={tabs:{},frames:[]},u=new Uint8Array(r.length),f,h=0,m=0,x=[137,80,78,71,13,10,26,10];for(var p,b=0;b<8;b++)if(r[b]!=x[b])throw"The input is not a PNG file!";for(;n<r.length;){let e=l.readUint(r,n);n+=4;let x=l.readASCII(r,n,4);if(n+=4,"IHDR"==x)g=n,d.width=l.readUint(r,g),g+=4,d.height=l.readUint(r,g),d.depth=r[g+=4],d.ctype=r[++g],d.compress=r[++g],d.filter=r[++g],d.interlace=r[++g],g++;else if("iCCP"==x){for(var g,v,w=n;0!=r[w];)w++;l.readASCII(r,n,w-n),r[w+1];let a=r.slice(w+2,n+e),s=null;try{s=i(a)}catch(e){s=o(a)}d.tabs[x]=s}else if("CgBI"==x)d.tabs[x]=r.slice(n,n+4);else if("IDAT"==x){for(b=0;b<e;b++)u[h+b]=r[n+b];h+=e}else if("acTL"==x)d.tabs[x]={num_frames:c(r,n),num_plays:c(r,n+4)},f=new Uint8Array(r.length);else if("fcTL"==x){0!=m&&((p=d.frames[d.frames.length-1]).data=s(d,f.slice(0,m),p.rect.width,p.rect.height),m=0);let e={x:c(r,n+12),y:c(r,n+16),width:c(r,n+4),height:c(r,n+8)},l=a(r,n+22),i={rect:e,delay:Math.round(1e3*(l=a(r,n+20)/(0==l?100:l))),dispose:r[n+24],blend:r[n+25]};d.frames.push(i)}else if("fdAT"==x){for(b=0;b<e-4;b++)f[m+b]=r[n+b+4];m+=e-4}else if("pHYs"==x)d.tabs[x]=[l.readUint(r,n),l.readUint(r,n+4),r[n+8]];else if("cHRM"==x)for(b=0,d.tabs[x]=[];b<8;b++)d.tabs[x].push(l.readUint(r,n+4*b));else if("tEXt"==x||"zTXt"==x){null==d.tabs[x]&&(d.tabs[x]={});var y=l.nextZero(r,n),j=l.readASCII(r,n,y-n),N=n+e-y-1;if("tEXt"==x)v=l.readASCII(r,y+1,N);else{var A=i(r.slice(y+2,y+2+N));v=l.readUTF8(A,0,A.length)}d.tabs[x][j]=v}else if("iTXt"==x){null==d.tabs[x]&&(d.tabs[x]={}),y=0,w=n,y=l.nextZero(r,w),j=l.readASCII(r,w,y-w);let a=r[w=y+1];r[w+1],w+=2,y=l.nextZero(r,w),l.readASCII(r,w,y-w),w=y+1,y=l.nextZero(r,w),l.readUTF8(r,w,y-w),N=e-((w=y+1)-n),0==a?v=l.readUTF8(r,w,N):(A=i(r.slice(w,w+N)),v=l.readUTF8(A,0,A.length)),d.tabs[x][j]=v}else if("PLTE"==x)d.tabs[x]=l.readBytes(r,n,e);else if("hIST"==x){let e=d.tabs.PLTE.length/3;for(b=0,d.tabs[x]=[];b<e;b++)d.tabs[x].push(a(r,n+2*b))}else if("tRNS"==x)3==d.ctype?d.tabs[x]=l.readBytes(r,n,e):0==d.ctype?d.tabs[x]=a(r,n):2==d.ctype&&(d.tabs[x]=[a(r,n),a(r,n+2),a(r,n+4)]);else if("gAMA"==x)d.tabs[x]=l.readUint(r,n)/1e5;else if("sRGB"==x)d.tabs[x]=r[n];else if("bKGD"==x)0==d.ctype||4==d.ctype?d.tabs[x]=[a(r,n)]:2==d.ctype||6==d.ctype?d.tabs[x]=[a(r,n),a(r,n+2),a(r,n+4)]:3==d.ctype&&(d.tabs[x]=r[n]);else if("IEND"==x)break;n+=e,l.readUint(r,n),n+=4}return 0!=m&&((p=d.frames[d.frames.length-1]).data=s(d,f.slice(0,m),p.rect.width,p.rect.height)),d.data=s(d,u,d.width,d.height),delete d.compress,delete d.interlace,delete d.filter,d},toRGBA8:function(e){let r=e.width,n=e.height;if(null==e.tabs.acTL)return[a(e.data,r,n,e).buffer];let l=[];null==e.frames[0].data&&(e.frames[0].data=e.data);let s=r*n*4,i=new Uint8Array(s),o=new Uint8Array(s),c=new Uint8Array(s);for(let u=0;u<e.frames.length;u++){let h=e.frames[u],m=h.rect.x,x=h.rect.y,p=h.rect.width,b=h.rect.height,g=a(h.data,p,b,e);if(0!=u)for(var d=0;d<s;d++)c[d]=i[d];if(0==h.blend?f(g,p,b,i,r,n,m,x,0):1==h.blend&&f(g,p,b,i,r,n,m,x,1),l.push(i.buffer.slice(0)),0==h.dispose);else if(1==h.dispose)f(o,p,b,i,r,n,m,x,0);else if(2==h.dispose)for(d=0;d<s;d++)i[d]=c[d]}return l},_paeth:u,_copyTile:f,_bin:l}}();!function(){let{_copyTile:e}=u,{_bin:r}=u,n=u._paeth;var l={table:function(){let e=new Uint32Array(256);for(let r=0;r<256;r++){let n=r;for(let e=0;e<8;e++)1&n?n=0xedb88320^n>>>1:n>>>=1;e[r]=n}return e}(),update(e,r,n,a){for(let s=0;s<a;s++)e=l.table[255&(e^r[n+s])]^e>>>8;return e},crc:(e,r,n)=>0xffffffff^l.update(0xffffffff,e,r,n)};function a(e,r,n,l){r[n]+=e[0]*l>>4,r[n+1]+=e[1]*l>>4,r[n+2]+=e[2]*l>>4,r[n+3]+=e[3]*l>>4}function s(e){return Math.max(0,Math.min(255,e))}function i(e,r){let n=e[0]-r[0],l=e[1]-r[1],a=e[2]-r[2],s=e[3]-r[3];return n*n+l*l+a*a+s*s}function o(e,r,n,l,o,c,d){null==d&&(d=1);let u=l.length,f=[];for(var h,m=0;m<u;m++){let e=l[m];f.push([e>>>0&255,e>>>8&255,e>>>16&255,e>>>24&255])}for(m=0;m<u;m++){let e=0xffffffff;for(var x=0,p=0;p<u;p++){var b=i(f[m],f[p]);p!=m&&b<e&&(e=b,x=p)}}let g=new Uint32Array(o.buffer),v=new Int16Array(r*n*4),w=[0,8,2,10,12,4,14,6,3,11,1,9,15,7,13,5];for(m=0;m<w.length;m++)w[m]=255*((w[m]+.5)/16-.5);for(let o=0;o<n;o++)for(let y=0;y<r;y++){m=4*(o*r+y),2!=d?h=[s(e[m]+v[m]),s(e[m+1]+v[m+1]),s(e[m+2]+v[m+2]),s(e[m+3]+v[m+3])]:(b=w[4*(3&o)+(3&y)],h=[s(e[m]+b),s(e[m+1]+b),s(e[m+2]+b),s(e[m+3]+b)]),x=0;let j=0xffffff;for(p=0;p<u;p++){let e=i(h,f[p]);e<j&&(j=e,x=p)}let N=f[x],A=[h[0]-N[0],h[1]-N[1],h[2]-N[2],h[3]-N[3]];1==d&&(y!=r-1&&a(A,v,m+4,7),o!=n-1&&(0!=y&&a(A,v,m+4*r-4,3),a(A,v,m+4*r,5),y!=r-1&&a(A,v,m+4*r+4,1))),c[m>>2]=x,g[m>>2]=l[x]}}function c(e,n,a,s,i){null==i&&(i={});let{crc:o}=l,c=r.writeUint,d=r.writeUshort,u=r.writeASCII,f=8,h=e.frames.length>1,m,x=!1,p=33+20*!!h;if(null!=i.sRGB&&(p+=13),null!=i.pHYs&&(p+=21),null!=i.iCCP&&(p+=21+(m=pako.deflate(i.iCCP)).length+4),3==e.ctype){for(var b=e.plte.length,g=0;g<b;g++)e.plte[g]>>>24!=255&&(x=!0);p+=8+3*b+4+(x?8+ +b+4:0)}for(var v=0;v<e.frames.length;v++)h&&(p+=38),p+=(N=e.frames[v]).cimg.length+12,0!=v&&(p+=4);let w=new Uint8Array(p+=12),y=[137,80,78,71,13,10,26,10];for(g=0;g<8;g++)w[g]=y[g];if(c(w,f,13),u(w,f+=4,"IHDR"),c(w,f+=4,n),c(w,f+=4,a),w[f+=4]=e.depth,w[++f]=e.ctype,w[++f]=0,w[++f]=0,w[++f]=0,c(w,++f,o(w,f-17,17)),f+=4,null!=i.sRGB&&(c(w,f,1),u(w,f+=4,"sRGB"),w[f+=4]=i.sRGB,c(w,++f,o(w,f-5,5)),f+=4),null!=i.iCCP){let e=13+m.length;c(w,f,e),u(w,f+=4,"iCCP"),u(w,f+=4,"ICC profile"),f+=11,f+=2,w.set(m,f),c(w,f+=m.length,o(w,f-(e+4),e+4)),f+=4}if(null!=i.pHYs&&(c(w,f,9),u(w,f+=4,"pHYs"),c(w,f+=4,i.pHYs[0]),c(w,f+=4,i.pHYs[1]),w[f+=4]=i.pHYs[2],c(w,++f,o(w,f-13,13)),f+=4),h&&(c(w,f,8),u(w,f+=4,"acTL"),c(w,f+=4,e.frames.length),c(w,f+=4,null!=i.loop?i.loop:0),c(w,f+=4,o(w,f-12,12)),f+=4),3==e.ctype){for(c(w,f,3*(b=e.plte.length)),u(w,f+=4,"PLTE"),f+=4,g=0;g<b;g++){let r=3*g,n=e.plte[g],l=255&n,a=n>>>8&255,s=n>>>16&255;w[f+r+0]=l,w[f+r+1]=a,w[f+r+2]=s}if(c(w,f+=3*b,o(w,f-3*b-4,3*b+4)),f+=4,x){for(c(w,f,b),u(w,f+=4,"tRNS"),f+=4,g=0;g<b;g++)w[f+g]=e.plte[g]>>>24&255;c(w,f+=b,o(w,f-b-4,b+4)),f+=4}}let j=0;for(v=0;v<e.frames.length;v++){var N=e.frames[v];h&&(c(w,f,26),u(w,f+=4,"fcTL"),c(w,f+=4,j++),c(w,f+=4,N.rect.width),c(w,f+=4,N.rect.height),c(w,f+=4,N.rect.x),c(w,f+=4,N.rect.y),d(w,f+=4,s[v]),d(w,f+=2,1e3),w[f+=2]=N.dispose,w[++f]=N.blend,c(w,++f,o(w,f-30,30)),f+=4);let r=N.cimg;c(w,f,(b=r.length)+4*(0!=v));let n=f+=4;u(w,f,0==v?"IDAT":"fdAT"),f+=4,0!=v&&(c(w,f,j++),f+=4),w.set(r,f),c(w,f+=b,o(w,n,f-n)),f+=4}return c(w,f,0),u(w,f+=4,"IEND"),c(w,f+=4,o(w,f-4,4)),f+=4,w.buffer}function f(e,r,l){for(let a=0;a<e.frames.length;a++){let s=e.frames[a];s.rect.width;let i=s.rect.height,o=new Uint8Array(i*s.bpl+i);s.cimg=function(e,r,l,a,s,i,o){let c=[],u,f=[0,1,2,3,4];-1!=i?f=[i]:(r*a>5e5||1==l)&&(f=[0]),o&&(u={level:0});for(var h=0;h<f.length;h++){for(let i=0;i<r;i++)!function(e,r,l,a,s,i){let o=l*a,c=o+l;if(e[c]=i,c++,0==i)if(a<500)for(var d=0;d<a;d++)e[c+d]=r[o+d];else e.set(new Uint8Array(r.buffer,o,a),c);else if(1==i){for(d=0;d<s;d++)e[c+d]=r[o+d];for(d=s;d<a;d++)e[c+d]=r[o+d]-r[o+d-s]+256&255}else if(0==l){for(d=0;d<s;d++)e[c+d]=r[o+d];if(2==i)for(d=s;d<a;d++)e[c+d]=r[o+d];if(3==i)for(d=s;d<a;d++)e[c+d]=r[o+d]-(r[o+d-s]>>1)+256&255;if(4==i)for(d=s;d<a;d++)e[c+d]=r[o+d]-n(r[o+d-s],0,0)+256&255}else{if(2==i)for(d=0;d<a;d++)e[c+d]=r[o+d]+256-r[o+d-a]&255;if(3==i){for(d=0;d<s;d++)e[c+d]=r[o+d]+256-(r[o+d-a]>>1)&255;for(d=s;d<a;d++)e[c+d]=r[o+d]+256-(r[o+d-a]+r[o+d-s]>>1)&255}if(4==i){for(d=0;d<s;d++)e[c+d]=r[o+d]+256-n(0,r[o+d-a],0)&255;for(d=s;d<a;d++)e[c+d]=r[o+d]+256-n(r[o+d-s],r[o+d-a],r[o+d-s-a])&255}}}(s,e,i,a,l,f[h]);c.push(d.deflate(s,u))}let m,x=1e9;for(h=0;h<c.length;h++)c[h].length<x&&(m=h,x=c[h].length);return c[m]}(s.img,i,s.bpp,s.bpl,o,r,l)}}function h(r,n,l,a,s){let i=s[0],c=s[1],d=s[2],u=s[3],f=s[4],h=s[5],b=6,g=8,v=255;for(var w=0;w<r.length;w++){let e=new Uint8Array(r[w]);for(var y=e.length,j=0;j<y;j+=4)v&=e[j+3]}let N=255!=v,A=function(r,n,l,a,s,i){let o=[];for(var c,d=0;d<r.length;d++){let c=new Uint8Array(r[d]),m=new Uint32Array(c.buffer),p=0,b=0,g=n,v=l,w=+!!a;if(0!=d){let y=i||a||1==d||0!=o[d-2].dispose?1:2,j=0,N=1e9;for(let e=0;e<y;e++){var u,f=new Uint8Array(r[d-1-e]);let a=new Uint32Array(r[d-1-e]),i=n,o=l,c=-1,x=-1;for(let e=0;e<l;e++)for(let r=0;r<n;r++)m[h=e*n+r]!=a[h]&&(r<i&&(i=r),r>c&&(c=r),e<o&&(o=e),e>x&&(x=e));-1==c&&(i=o=c=x=0),s&&(1==(1&i)&&i--,1==(1&o)&&o--);let w=(c-i+1)*(x-o+1);w<N&&(N=w,j=e,p=i,b=o,g=c-i+1,v=x-o+1)}f=new Uint8Array(r[d-1-j]),1==j&&(o[d-1].dispose=2),e(f,n,l,u=new Uint8Array(g*v*4),g,v,-p,-b,0),1==(w=+!!e(c,n,l,u,g,v,-p,-b,3))?x(c,n,l,u,{x:p,y:b,width:g,height:v}):e(c,n,l,u,g,v,-p,-b,0)}else u=c.slice(0);o.push({rect:{x:p,y:b,width:g,height:v},img:u,blend:w,dispose:0})}if(a)for(d=0;d<o.length;d++){if(1==(c=o[d]).blend)continue;let e=c.rect,a=o[d-1].rect,i=Math.min(e.x,a.x),u=Math.min(e.y,a.y),f={x:i,y:u,width:Math.max(e.x+e.width,a.x+a.width)-i,height:Math.max(e.y+e.height,a.y+a.height)-u};o[d-1].dispose=1,d-1!=0&&m(r,n,l,o,d-1,f,s),m(r,n,l,o,d,f,s)}if(1!=r.length)for(var h=0;h<o.length;h++)(c=o[h]).rect.width,c.rect.height;return o}(r,n,l,i,c,d),k={},U=[],C=[];if(0!=a){let e=[];for(j=0;j<A.length;j++)e.push(A[j].img.buffer);let r=p(function(e){let r=0;for(var n=0;n<e.length;n++)r+=e[n].byteLength;let l=new Uint8Array(r),a=0;for(n=0;n<e.length;n++){let r=new Uint8Array(e[n]),s=r.length;for(let e=0;e<s;e+=4){let n=r[e],s=r[e+1],i=r[e+2],o=r[e+3];0==o&&(n=s=i=0),l[a+e]=n,l[a+e+1]=s,l[a+e+2]=i,l[a+e+3]=o}a+=s}return l.buffer}(e),a);for(j=0;j<r.plte.length;j++)U.push(r.plte[j].est.rgba);let n=0;for(j=0;j<A.length;j++){let e=(S=A[j]).img.length;var F=new Uint8Array(r.inds.buffer,n>>2,e>>2);C.push(F);let l=new Uint8Array(r.abuf,n,e);h&&o(S.img,S.rect.width,S.rect.height,U,l,F),S.img.set(l),n+=e}}else for(w=0;w<A.length;w++){var S=A[w];let e=new Uint32Array(S.img.buffer);var E=S.rect.width;for(F=new Uint8Array(y=e.length),C.push(F),j=0;j<y;j++){let r=e[j];if(0!=j&&r==e[j-1])F[j]=F[j-1];else if(j>E&&r==e[j-E])F[j]=F[j-E];else{let e=k[r];if(null==e&&(k[r]=e=U.length,U.push(r),U.length>=300))break;F[j]=e}}}let M=U.length;for(M<=256&&0==f&&(g=Math.max(g=M<=2?1:M<=4?2:M<=16?4:8,u)),w=0;w<A.length;w++){(S=A[w]).rect.x,S.rect.y,E=S.rect.width;let e=S.rect.height,r=S.img;new Uint32Array(r.buffer);let n=4*E,l=4;if(M<=256&&0==f){var _=new Uint8Array((n=Math.ceil(g*E/8))*e);let a=C[w];for(let r=0;r<e;r++){j=r*n;let e=r*E;if(8==g)for(var I=0;I<E;I++)_[j+I]=a[e+I];else if(4==g)for(I=0;I<E;I++)_[j+(I>>1)]|=a[e+I]<<4-4*(1&I);else if(2==g)for(I=0;I<E;I++)_[j+(I>>2)]|=a[e+I]<<6-2*(3&I);else if(1==g)for(I=0;I<E;I++)_[j+(I>>3)]|=a[e+I]<<7-(7&I)}r=_,b=3,l=1}else if(0==N&&1==A.length){_=new Uint8Array(E*e*3);let a=E*e;for(j=0;j<a;j++){let e=3*j,n=4*j;_[e]=r[n],_[e+1]=r[n+1],_[e+2]=r[n+2]}r=_,b=2,l=3,n=3*E}S.img=r,S.bpl=n,S.bpp=l}return{ctype:b,depth:g,plte:U,frames:A}}function m(r,n,l,a,s,i,o){let c=Uint8Array,d=Uint32Array,u=new c(r[s-1]),f=new d(r[s-1]),h=s+1<r.length?new c(r[s+1]):null,m=new c(r[s]),p=new d(m.buffer),b=n,g=l,v=-1,w=-1;for(let e=0;e<i.height;e++)for(let r=0;r<i.width;r++){let l=i.x+r,o=i.y+e,c=o*n+l,d=p[c];0==d||0==a[s-1].dispose&&f[c]==d&&(null==h||0!=h[4*c+3])||(l<b&&(b=l),l>v&&(v=l),o<g&&(g=o),o>w&&(w=o))}-1==v&&(b=g=v=w=0),o&&(1==(1&b)&&b--,1==(1&g)&&g--),i={x:b,y:g,width:v-b+1,height:w-g+1};let y=a[s];y.rect=i,y.blend=1,y.img=new Uint8Array(i.width*i.height*4),0==a[s-1].dispose?(e(u,n,l,y.img,i.width,i.height,-i.x,-i.y,0),x(m,n,l,y.img,i)):e(m,n,l,y.img,i.width,i.height,-i.x,-i.y,0)}function x(r,n,l,a,s){e(r,n,l,a,s.width,s.height,-s.x,-s.y,2)}function p(e,r){let n,l=new Uint8Array(e),a=l.slice(0),s=new Uint32Array(a.buffer),i=b(a,r),o=i[0],c=i[1],d=l.length,u=new Uint8Array(d>>2);if(l.length<2e7)for(var f=0;f<d;f+=4)n=g(o,h=l[f]*(1/255),m=l[f+1]*(1/255),x=l[f+2]*(1/255),p=l[f+3]*(1/255)),u[f>>2]=n.ind,s[f>>2]=n.est.rgba;else for(f=0;f<d;f+=4){var h=l[f]*(1/255),m=l[f+1]*(1/255),x=l[f+2]*(1/255),p=l[f+3]*(1/255);for(n=o;n.left;)n=0>=v(n.est,h,m,x,p)?n.left:n.right;u[f>>2]=n.ind,s[f>>2]=n.est.rgba}return{abuf:a.buffer,inds:u,plte:c}}function b(e,r,n){null==n&&(n=1e-4);let l=new Uint32Array(e.buffer),a={i0:0,i1:e.length,bst:null,est:null,tdst:0,left:null,right:null};a.bst=y(e,a.i0,a.i1),a.est=j(a.bst);let s=[a];for(;s.length<r;){let r=0,a=0;for(var i=0;i<s.length;i++)s[i].est.L>r&&(r=s[i].est.L,a=i);if(r<n)break;let o=s[a],c=function(e,r,n,l,a,s){for(l-=4;n<l;){for(;w(e,n,a)<=s;)n+=4;for(;w(e,l,a)>s;)l-=4;if(n>=l)break;let i=r[n>>2];r[n>>2]=r[l>>2],r[l>>2]=i,n+=4,l-=4}for(;w(e,n,a)>s;)n-=4;return n+4}(e,l,o.i0,o.i1,o.est.e,o.est.eMq255);if(o.i0>=c||o.i1<=c){o.est.L=0;continue}let d={i0:o.i0,i1:c,bst:null,est:null,tdst:0,left:null,right:null};d.bst=y(e,d.i0,d.i1),d.est=j(d.bst);let u={i0:c,i1:o.i1,bst:null,est:null,tdst:0,left:null,right:null};for(i=0,u.bst={R:[],m:[],N:o.bst.N-d.bst.N};i<16;i++)u.bst.R[i]=o.bst.R[i]-d.bst.R[i];for(i=0;i<4;i++)u.bst.m[i]=o.bst.m[i]-d.bst.m[i];u.est=j(u.bst),o.left=d,o.right=u,s[a]=d,s.push(u)}for(s.sort((e,r)=>r.bst.N-e.bst.N),i=0;i<s.length;i++)s[i].ind=i;return[a,s]}function g(e,r,n,l,a){if(null==e.left){var s;let i,o,c,d;return s=e.est.q,i=r-s[0],o=n-s[1],c=l-s[2],e.tdst=i*i+o*o+c*c+(d=a-s[3])*d,e}let i=v(e.est,r,n,l,a),o=e.left,c=e.right;i>0&&(o=e.right,c=e.left);let d=g(o,r,n,l,a);if(d.tdst<=i*i)return d;let u=g(c,r,n,l,a);return u.tdst<d.tdst?u:d}function v(e,r,n,l,a){let{e:s}=e;return s[0]*r+s[1]*n+s[2]*l+s[3]*a-e.eMq}function w(e,r,n){return e[r]*n[0]+e[r+1]*n[1]+e[r+2]*n[2]+e[r+3]*n[3]}function y(e,r,n){let l=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],a=[0,0,0,0];for(let s=r;s<n;s+=4){let r=e[s]*(1/255),n=e[s+1]*(1/255),i=e[s+2]*(1/255),o=e[s+3]*(1/255);a[0]+=r,a[1]+=n,a[2]+=i,a[3]+=o,l[0]+=r*r,l[1]+=r*n,l[2]+=r*i,l[3]+=r*o,l[5]+=n*n,l[6]+=n*i,l[7]+=n*o,l[10]+=i*i,l[11]+=i*o,l[15]+=o*o}return l[4]=l[1],l[8]=l[2],l[9]=l[6],l[12]=l[3],l[13]=l[7],l[14]=l[11],{R:l,m:a,N:n-r>>2}}function j(e){let{R:r}=e,{m:n}=e,{N:l}=e,a=n[0],s=n[1],i=n[2],o=n[3],c=0==l?0:1/l,d=[r[0]-a*a*c,r[1]-a*s*c,r[2]-a*i*c,r[3]-a*o*c,r[4]-s*a*c,r[5]-s*s*c,r[6]-s*i*c,r[7]-s*o*c,r[8]-i*a*c,r[9]-i*s*c,r[10]-i*i*c,r[11]-i*o*c,r[12]-o*a*c,r[13]-o*s*c,r[14]-o*i*c,r[15]-o*o*c],u=[Math.random(),Math.random(),Math.random(),Math.random()],f=0,h=0;if(0!=l)for(let e=0;e<16&&(u=N.multVec(d,u),h=Math.sqrt(N.dot(u,u)),u=N.sml(1/h,u),!(0!=e&&1e-9>Math.abs(h-f)));e++)f=h;let m=[a*c,s*c,i*c,o*c];return{Cov:d,q:m,e:u,L:f,eMq255:N.dot(N.sml(255,m),u),eMq:N.dot(u,m),rgba:(Math.round(255*m[3])<<24|Math.round(255*m[2])<<16|Math.round(255*m[1])<<8|(0|Math.round(255*m[0])))>>>0}}var N={multVec:(e,r)=>[e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],e[4]*r[0]+e[5]*r[1]+e[6]*r[2]+e[7]*r[3],e[8]*r[0]+e[9]*r[1]+e[10]*r[2]+e[11]*r[3],e[12]*r[0]+e[13]*r[1]+e[14]*r[2]+e[15]*r[3]],dot:(e,r)=>e[0]*r[0]+e[1]*r[1]+e[2]*r[2]+e[3]*r[3],sml:(e,r)=>[e*r[0],e*r[1],e*r[2],e*r[3]]};u.encode=function(e,r,n,l,a,s,i){null==l&&(l=0),null==i&&(i=!1);let o=h(e,r,n,l,[!1,!1,!1,0,i,!1]);return f(o,-1),c(o,r,n,a,s)},u.encodeLL=function(e,r,n,l,a,s,i,o){let d={ctype:0+2*(1!=l)+4*(0!=a),depth:s,frames:[]},u=(l+a)*s,h=u*r;for(let l=0;l<e.length;l++)d.frames.push({rect:{x:0,y:0,width:r,height:n},img:new Uint8Array(e[l]),blend:0,dispose:1,bpp:Math.ceil(u/8),bpl:Math.ceil(h/8)});return f(d,0,!0),c(d,r,n,i,o)},u.encode.compress=h,u.encode.dither=o,u.quantize=p,u.quantize.getKDtree=b,u.quantize.getNearest=g}();let f={toArrayBuffer(e,r){let n=e.width,l=e.height,a=n<<2,s=new Uint32Array(e.getContext("2d").getImageData(0,0,n,l).data.buffer),i=(32*n+31)/32<<2,o=i*l,c=122+o,d=new ArrayBuffer(c),u=new DataView(d),h,m,x,p,b=1048576,g=0,v=0,w=0;function y(e){u.setUint16(v,e,!0),v+=2}function j(e){u.setUint32(v,e,!0),v+=4}y(19778),j(c),v+=4,j(122),j(108),j(n),j(-l>>>0),y(1),y(32),j(3),j(o),j(2835),j(2835),v+=8,j(0xff0000),j(65280),j(255),j(0xff000000),j(0x57696e20),function e(){for(;g<l&&b>0;){for(p=122+g*i,h=0;h<a;)b--,x=(m=s[w++])>>>24,u.setUint32(p+h,m<<8|x),h+=4;g++}w<s.length?(b=1048576,setTimeout(e,f._dly)):r(d)}()},toBlob(e,r){this.toArrayBuffer(e,e=>{r(new Blob([e],{type:"image/bmp"}))})},_dly:9};var h={CHROME:"CHROME",FIREFOX:"FIREFOX",DESKTOP_SAFARI:"DESKTOP_SAFARI",IE:"IE",IOS:"IOS",ETC:"ETC"},m={[h.CHROME]:16384,[h.FIREFOX]:11180,[h.DESKTOP_SAFARI]:16384,[h.IE]:8192,[h.IOS]:4096,[h.ETC]:8192};let x="u">typeof window,p="u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,b=x&&window.cordova&&window.cordova.require&&window.cordova.require("cordova/modulemapper"),g=(x||p)&&(b&&b.getOriginalSymbol(window,"File")||"u">typeof File&&File),v=(x||p)&&(b&&b.getOriginalSymbol(window,"FileReader")||"u">typeof FileReader&&FileReader);function w(e,r,n=Date.now()){return new Promise(l=>{let a=e.split(","),s=a[0].match(/:(.*?);/)[1],i=globalThis.atob(a[1]),o=i.length,c=new Uint8Array(o);for(;o--;)c[o]=i.charCodeAt(o);let d=new Blob([c],{type:s});d.name=r,d.lastModified=n,l(d)})}function y(e){return new Promise((r,n)=>{let l=new v;l.onload=()=>r(l.result),l.onerror=e=>n(e),l.readAsDataURL(e)})}function j(e){return new Promise((r,n)=>{let l=new Image;l.onload=()=>r(l),l.onerror=e=>n(e),l.src=e})}function N(){if(void 0!==N.cachedResult)return N.cachedResult;let e=h.ETC,{userAgent:r}=navigator;return/Chrom(e|ium)/i.test(r)?e=h.CHROME:/iP(ad|od|hone)/i.test(r)&&/WebKit/i.test(r)?e=h.IOS:/Safari/i.test(r)?e=h.DESKTOP_SAFARI:/Firefox/i.test(r)?e=h.FIREFOX:(/MSIE/i.test(r)||!0==!!document.documentMode)&&(e=h.IE),N.cachedResult=e,N.cachedResult}function A(e,r){let n=m[N()],l=e,a=r,s=l*a,i=l>a?a/l:l/a;for(;s>n*n;){let e=(n+l)/2,r=(n+a)/2;e<r?(a=r,l=r*i):(a=e*i,l=e),s=l*a}return{width:l,height:a}}function k(e,r){let n,l;try{if(l=(n=new OffscreenCanvas(e,r)).getContext("2d"),null===l)throw Error("getContext of OffscreenCanvas returns null")}catch(e){l=(n=document.createElement("canvas")).getContext("2d")}return n.width=e,n.height=r,[n,l]}function U(e,r){let{width:n,height:l}=A(e.width,e.height),[a,s]=k(n,l);return r&&/jpe?g/.test(r)&&(s.fillStyle="white",s.fillRect(0,0,a.width,a.height)),s.drawImage(e,0,0,a.width,a.height),a}function C(){return void 0!==C.cachedResult||(C.cachedResult=["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"u">typeof document&&"ontouchend"in document),C.cachedResult}function F(e,r={}){return new Promise(function(n,l){let a,s;var i=function(){try{return s=U(a,r.fileType||e.type),n([a,s])}catch(e){return l(e)}},o=function(r){try{var n=function(e){try{throw e}catch(e){return l(e)}};try{let r;return y(e).then(function(e){try{return r=e,j(r).then(function(e){try{return a=e,function(){try{return i()}catch(e){return l(e)}}()}catch(e){return n(e)}},n)}catch(e){return n(e)}},n)}catch(e){n(e)}}catch(e){return l(e)}};try{if(C()||[h.DESKTOP_SAFARI,h.MOBILE_SAFARI].includes(N()))throw Error("Skip createImageBitmap on IOS and Safari");return createImageBitmap(e).then(function(e){try{return a=e,i()}catch(e){return o()}},o)}catch(e){o()}})}function S(e,r,n,l,a=1){return new Promise(function(s,i){let o;if("image/png"===r){let s,i;return s=e.getContext("2d"),{data:i}=s.getImageData(0,0,e.width,e.height),(o=new Blob([u.encode([i.buffer],e.width,e.height,4096*a)],{type:r})).name=n,o.lastModified=l,h.call(this)}if("image/bmp"===r)return new Promise(r=>f.toBlob(e,r)).then((function(e){try{return(o=e).name=n,o.lastModified=l,d.call(this)}catch(e){return i(e)}}).bind(this),i);if("function"==typeof OffscreenCanvas&&e instanceof OffscreenCanvas)return e.convertToBlob({type:r,quality:a}).then((function(e){try{return(o=e).name=n,o.lastModified=l,c.call(this)}catch(e){return i(e)}}).bind(this),i);return w(e.toDataURL(r,a),n,l).then((function(e){try{return o=e,c.call(this)}catch(e){return i(e)}}).bind(this),i);function c(){return d.call(this)}function d(){return h.call(this)}function h(){return s(o)}})}function E(e){e.width=0,e.height=0}function M(){return new Promise(function(e,r){let n,l,a,s;return void 0!==M.cachedResult?e(M.cachedResult):w("data:image/jpeg;base64,/9j/4QAiRXhpZgAATU0AKgAAAAgAAQESAAMAAAABAAYAAAAAAAD/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAf/AABEIAAEAAgMBEQACEQEDEQH/xABKAAEAAAAAAAAAAAAAAAAAAAALEAEAAAAAAAAAAAAAAAAAAAAAAQEAAAAAAAAAAAAAAAAAAAAAEQEAAAAAAAAAAAAAAAAAAAAA/9oADAMBAAIRAxEAPwA/8H//2Q==","test.jpg",Date.now()).then(function(i){try{return n=i,F(n).then(function(i){try{return l=i[1],S(l,n.type,n.name,n.lastModified).then(function(n){try{return a=n,E(l),F(a).then(function(n){try{return s=n[0],M.cachedResult=1===s.width&&2===s.height,e(M.cachedResult)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)}catch(e){return r(e)}},r)})}function _(e){return new Promise((r,n)=>{let l=new v;l.onload=e=>{let n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return r(-2);let l=n.byteLength,a=2;for(;a<l&&!(8>=n.getUint16(a+2,!1));){let e=n.getUint16(a,!1);if(a+=2,65505==e){if(0x45786966!=n.getUint32(a+=2,!1))return r(-1);let e=18761==n.getUint16(a+=6,!1);a+=n.getUint32(a+4,e);let l=n.getUint16(a,e);a+=2;for(let s=0;s<l;s++)if(274==n.getUint16(a+12*s,e))return r(n.getUint16(a+12*s+8,e))}else{if(65280!=(65280&e))break;a+=n.getUint16(a,!1)}}return r(-1)},l.onerror=e=>n(e),l.readAsArrayBuffer(e)})}function I(e,r){let{width:n}=e,{height:l}=e,{maxWidthOrHeight:a}=r,s,i=e;return isFinite(a)&&(n>a||l>a)&&([i,s]=k(n,l),n>l?(i.width=a,i.height=l/n*a):(i.width=n/l*a,i.height=a),s.drawImage(e,0,0,i.width,i.height),E(e)),i}function R(e,r){let{width:n}=e,{height:l}=e,[a,s]=k(n,l);switch(r>4&&r<9?(a.width=l,a.height=n):(a.width=n,a.height=l),r){case 2:s.transform(-1,0,0,1,n,0);break;case 3:s.transform(-1,0,0,-1,n,l);break;case 4:s.transform(1,0,0,-1,0,l);break;case 5:s.transform(0,1,1,0,0,0);break;case 6:s.transform(0,1,-1,0,l,0);break;case 7:s.transform(0,-1,-1,0,l,n);break;case 8:s.transform(0,-1,1,0,0,n)}return s.drawImage(e,0,0,n,l),E(e),a}function T(e,r,n=0){return new Promise(function(l,a){let s,i,o,c,d,u,f,h,m,x,p,b,g,v,w,y,j,N,A,U;function C(e=5){if(r.signal&&r.signal.aborted)throw r.signal.reason;s+=e,r.onProgress(Math.min(s,100))}function T(e){if(r.signal&&r.signal.aborted)throw r.signal.reason;s=Math.min(Math.max(e,s),100),r.onProgress(s)}return s=n,i=r.maxIteration||10,o=1024*r.maxSizeMB*1024,C(),F(e,r).then((function(n){try{return[,c]=n,C(),d=I(c,r),C(),new Promise(function(n,l){var a;if(!(a=r.exifOrientation))return _(e).then((function(e){try{return a=e,s.call(this)}catch(e){return l(e)}}).bind(this),l);function s(){return n(a)}return s.call(this)}).then((function(n){try{return u=n,C(),M().then((function(n){try{return f=n?d:R(d,u),C(),h=r.initialQuality||1,m=r.fileType||e.type,S(f,m,e.name,e.lastModified,h).then((function(n){try{var s;if(x=n,C(),p=x.size>o,b=x.size>e.size,!p&&!b)return T(100),l(x);function u(){if(i--&&(w>o||w>g)){let r,n;return r=U?.95*A.width:A.width,n=U?.95*A.height:A.height,[j,N]=k(r,n),N.drawImage(A,0,0,r,n),h*="image/png"===m?.85:.95,S(j,m,e.name,e.lastModified,h).then(function(e){try{return y=e,E(A),A=j,w=y.size,T(Math.min(99,Math.floor((v-w)/(v-o)*100))),u}catch(e){return a(e)}},a)}return[1]}return g=e.size,w=v=x.size,A=f,U=!r.alwaysKeepResolution&&p,(s=(function(e){for(;e;){if(e.then)return void e.then(s,a);try{if(e.pop){if(e.length)return e.pop()?F.call(this):e;e=u}else e=e.call(this)}catch(e){return a(e)}}}).bind(this))(u);function F(){return E(A),E(j),E(d),E(f),E(c),T(100),l(y)}}catch(e){return a(e)}}).bind(this),a)}catch(e){return a(e)}}).bind(this),a)}catch(e){return a(e)}}).bind(this),a)}catch(e){return a(e)}}).bind(this),a)})}function B(e,l){return new Promise(function(a,s){let i,o,c,d,u,f;if(i={...l},c=0,{onProgress:d}=i,i.maxSizeMB=i.maxSizeMB||1/0,u="boolean"!=typeof i.useWebWorker||i.useWebWorker,delete i.useWebWorker,i.onProgress=e=>{c=e,"function"==typeof d&&d(c)},!(e instanceof Blob||e instanceof g))return s(Error("The file given is not an instance of Blob or File"));if(!/^image/.test(e.type))return s(Error("The file given is not an image"));if(f="u">typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope,!u||"function"!=typeof Worker||f)return T(e,i).then((function(e){try{return o=e,x.call(this)}catch(e){return s(e)}}).bind(this),s);var h=(function(){try{return x.call(this)}catch(e){return s(e)}}).bind(this),m=function(r){try{return T(e,i).then(function(e){try{return o=e,h()}catch(e){return s(e)}},s)}catch(e){return s(e)}};try{return i.libURL=i.libURL||"https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.2/dist/browser-image-compression.js",new Promise((n,l)=>{var a;let s;r||(s=[],"function"==typeof(a="\nlet scriptImported = false\nself.addEventListener('message', async (e) => {\n  const { file, id, imageCompressionLibUrl, options } = e.data\n  options.onProgress = (progress) => self.postMessage({ progress, id })\n  try {\n    if (!scriptImported) {\n      // console.log('[worker] importScripts', imageCompressionLibUrl)\n      self.importScripts(imageCompressionLibUrl)\n      scriptImported = true\n    }\n    // console.log('[worker] self', self)\n    const compressedFile = await imageCompression(file, options)\n    self.postMessage({ file: compressedFile, id })\n  } catch (e) {\n    // console.error('[worker] error', e)\n    self.postMessage({ error: e.message + '\\n' + e.stack, id })\n  }\n})\n")?s.push(`(${a})()`):s.push(a),r=URL.createObjectURL(new Blob(s)));let o=new Worker(r);o.addEventListener("message",function(e){if(i.signal&&i.signal.aborted)o.terminate();else if(void 0===e.data.progress){if(e.data.error)return l(Error(e.data.error)),void o.terminate();n(e.data.file),o.terminate()}else i.onProgress(e.data.progress)}),o.addEventListener("error",l),i.signal&&i.signal.addEventListener("abort",()=>{l(i.signal.reason),o.terminate()}),o.postMessage({file:e,imageCompressionLibUrl:i.libURL,options:{...i,onProgress:void 0,signal:void 0}})}).then(function(e){try{return o=e,h()}catch(e){return m()}},m)}catch(e){m()}function x(){try{o.name=e.name,o.lastModified=e.lastModified}catch(e){}try{i.preserveExif&&"image/jpeg"===e.type&&(!i.fileType||i.fileType&&i.fileType===e.type)&&(o=n(e,o))}catch(e){}return a(o)}})}B.getDataUrlFromFile=y,B.getFilefromDataUrl=w,B.loadImage=j,B.drawImageInCanvas=U,B.drawFileInCanvas=F,B.canvasToFile=S,B.getExifOrientation=_,B.handleMaxWidthOrHeight=I,B.followExifOrientation=R,B.cleanupCanvasMemory=E,B.isAutoOrientationInBrowser=M,B.approximateBelowMaximumCanvasSizeOfBrowser=A,B.copyExifWithoutOrientation=n,B.getBrowserName=N,B.version="2.0.2",e.s(["default",()=>B])},464,e=>{"use strict";var r=e.i(43476),n=e.i(71645),l=e.i(73708),a=e.i(14764),s=e.i(37727),i=e.i(48256),o=e.i(61911),c=e.i(70756),d=e.i(64659),u=e.i(85384),f=e.i(13385);function h({onPostCreated:e}){let[h,m]=(0,n.useState)(!1),[x,p]=(0,n.useState)(""),[b,g]=(0,n.useState)(null),[v,w]=(0,n.useState)(null),[y,j]=(0,n.useState)("public"),[N,A]=(0,n.useState)(""),[k,U]=(0,n.useState)(!1),[C,F]=(0,n.useState)(!1),[S,E]=(0,n.useState)(!1),[M,_]=(0,n.useState)(null),I=(0,n.useRef)(null);(0,n.useEffect)(()=>{_(JSON.parse(localStorage.getItem("user")||"null"));let e=()=>{_(JSON.parse(localStorage.getItem("user")||"null"))};return window.addEventListener("userUpdated",e),()=>window.removeEventListener("userUpdated",e)},[]),(0,n.useEffect)(()=>{let e=localStorage.getItem("createPostDraft");if(e){let r=JSON.parse(e);p(r.content||""),j(r.privacy||"public"),r.imagePreview&&w(r.imagePreview),E(!0)}},[]),(0,n.useEffect)(()=>{if(h){let e={content:x,privacy:y,imagePreview:v,timestamp:Date.now()};localStorage.setItem("createPostDraft",JSON.stringify(e)),E(x.trim().length>0||null!==v)}},[x,y,v,h]);let[R,T]=(0,n.useState)([]),[B,L]=(0,n.useState)(!1),[P,z]=(0,n.useState)(""),[O,D]=(0,n.useState)(0),Q=(0,n.useCallback)(async e=>{if(!e.trim())return void T([]);try{let r=await u.default.get(`/profile/search?q=${encodeURIComponent(e)}&limit=5`);T(r.data.users||[])}catch(e){console.error("Failed to search users:",e),T([])}},[]);(0,n.useEffect)(()=>{h&&(()=>{let e=I.current;if(!e)return;e.style.height="auto";let r=Math.min(Math.max(e.scrollHeight,120),480);e.style.height=`${r}px`,e.style.overflowY=r>=480?"auto":"hidden"})()},[h,x]);let $=[{value:"public",label:"Public",icon:i.Globe,description:"Anyone can see"},{value:"friends",label:"Friends",icon:o.Users,description:"Only friends"},{value:"private",label:"Private",icon:c.Lock,description:"Only me"}],H=$.find(e=>e.value===y),q=async e=>{let r=e.target.files?.[0];if(r)try{let e=await (0,f.default)(r,{maxSizeMB:1,maxWidthOrHeight:1920,useWebWorker:!0,fileType:"image/jpeg"});console.log(`Original size: ${(r.size/1024/1024).toFixed(2)} MB`),console.log(`Compressed size: ${(e.size/1024/1024).toFixed(2)} MB`),g(e),w(URL.createObjectURL(e))}catch(e){console.error("Error compressing image:",e),g(r),w(URL.createObjectURL(r))}},W=async()=>{if(!x.trim()&&!b)return;F(!0);let r=new FormData;x.trim()&&r.append("content",x),b&&r.append("image",b),N&&r.append("tags",N),r.append("privacy",y);try{let n=await u.default.post("/posts",r),l=n?.data;p(""),g(null),w(null),j("public"),A(""),m(!1),localStorage.removeItem("createPostDraft"),E(!1),e&&e(l)}catch(e){console.error("Failed to post:",e)}finally{F(!1)}};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{onClick:()=>m(!0),className:"relative bg-gradient-to-br from-[#1e293b]/60 to-[#0f172a]/40 backdrop-blur-xl border border-[#334155]/50 rounded-3xl p-5 mb-6 overflow-visible hover:border-[#475569]/70 transition-all duration-300 cursor-pointer",children:(0,r.jsxs)("div",{className:"flex gap-4 items-center",children:[(0,r.jsx)("div",{className:"w-11 h-11 rounded-full border-2 border-[#1e293b] flex-shrink-0 ring-2 ring-blue-500/10 overflow-hidden",children:M?.avatarUrl?(0,r.jsx)("img",{src:M.avatarUrl,alt:"",className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gradient-to-tr from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold text-sm",children:(M?.displayName||M?.username)?.[0]?.toUpperCase()||"U"})}),(0,r.jsx)("div",{className:"flex-1 bg-[#0f172a]/50 border border-[#334155]/50 rounded-full px-4 py-3 text-[#64748b] text-[15px] hover:border-[#475569]/70 transition-colors",children:"What's on your mind?"})]})}),h&&(0,r.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm sm:p-4 p-0",children:(0,r.jsxs)("div",{className:"bg-[#1e293b] sm:border border-none border-[#334155]/60 sm:rounded-3xl rounded-none w-full max-w-lg h-full sm:h-auto sm:max-h-[90vh] flex flex-col overflow-hidden shadow-2xl relative",children:[(0,r.jsxs)("div",{className:"sm:hidden sticky top-0 z-[50] bg-[#1e293b] px-4 h-[44px] flex-shrink-0 flex items-center justify-between border-b border-[#334155]/20",children:[(0,r.jsx)("h2",{className:"text-[15px] font-bold text-white tracking-wide",children:"Create Post"}),(0,r.jsx)("button",{onClick:()=>m(!1),className:"w-8 h-8 flex items-center justify-center bg-[#334155]/50 hover:bg-[#475569]/70 rounded-full text-[#94a3b8] hover:text-white transition-all duration-200",children:(0,r.jsx)(s.X,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"hidden sm:flex items-center justify-between px-6 py-3 border-b border-[#334155]/50 bg-[#1e293b]",children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-white tracking-tight",children:"Create Post"}),(0,r.jsx)("button",{onClick:()=>m(!1),className:"w-9 h-9 flex items-center justify-center hover:bg-[#334155] rounded-full text-[#94a3b8] hover:text-white transition-all duration-200",children:(0,r.jsx)(s.X,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none] bg-[#1e293b]",children:[(0,r.jsx)("div",{className:"sm:relative sticky top-0 z-[40] bg-[#1e293b] px-4 sm:px-6 sm:py-2.5 pt-8 pb-2.5 mt-0 flex items-center justify-between sm:border-none border-b border-[#334155]/10",children:(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full border-2 border-[#334155] flex-shrink-0 ring-2 ring-blue-500/10 overflow-hidden",children:M?.avatarUrl?(0,r.jsx)("img",{src:M.avatarUrl,alt:"",className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full bg-gradient-to-tr from-blue-600 to-purple-600 flex items-center justify-center text-white font-bold text-xs",children:(M?.displayName||M?.username)?.[0]?.toUpperCase()||"U"})}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:e=>{e.stopPropagation(),U(!k)},className:"flex items-center gap-2 px-3 py-1.5 bg-[#334155]/30 hover:bg-[#334155]/50 rounded-xl transition-colors group sm:w-auto w-auto",children:[(0,r.jsx)(H.icon,{className:"sm:w-4 sm:h-4 w-3.5 h-3.5 text-blue-400 flex-shrink-0"}),(0,r.jsx)("span",{className:"sm:text-sm text-[13px] font-semibold text-[#e2e8f0]",children:H.label}),(0,r.jsx)(d.ChevronDown,{className:"sm:w-4 sm:h-4 w-3.5 h-3.5 text-[#64748b] ml-0.5"})]}),k&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"absolute top-full left-0 mt-1 w-56 bg-[#1e293b] border border-[#334155] rounded-xl shadow-2xl overflow-hidden z-20",children:$.map(e=>(0,r.jsxs)("button",{onClick:()=>{j(e.value),U(!1)},className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-[#334155]/50 transition-colors text-left",children:[(0,r.jsx)(e.icon,{className:"w-4 h-4 text-blue-400 flex-shrink-0"}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-white",children:e.label}),(0,r.jsx)("p",{className:"text-xs text-[#64748b]",children:e.description})]})]},e.value))}),(0,r.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>U(!1)})]})]})]})}),(0,r.jsx)("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:(0,r.jsx)("textarea",{ref:I,value:x,onChange:e=>{let r=e.target.value,n=e.target.selectionStart;p(r),D(n);let l=r.slice(0,n),a=l.lastIndexOf("@");if(-1!==a){let e=l.slice(a+1);(0===a||/\s/.test(l[a-1]))&&!/\s/.test(e)?(z(e),L(!0),Q(e)):L(!1)}else L(!1)},placeholder:"What's on your mind?",className:"w-full bg-transparent border-none outline-none focus:ring-0 text-white placeholder-[#64748b] resize-none py-2 sm:text-[18px] text-[16px] leading-relaxed overflow-y-auto [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",style:{minHeight:120,maxHeight:480},rows:1,autoFocus:!0,maxLength:65e3})}),B&&R.length>0&&(0,r.jsxs)("div",{className:"relative mt-1",children:[(0,r.jsx)("div",{className:"absolute top-0 left-0 w-full bg-[#1e293b] border border-[#334155] rounded-xl shadow-2xl overflow-hidden z-20 max-h-48 overflow-y-auto",children:R.map(e=>(0,r.jsxs)("button",{onClick:()=>{let r,n;return r=x.slice(0,O-P.length-1),n=x.slice(O),void(p(`${r}@${e.username} ${n}`),L(!1),z(""),I.current?.focus())},className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-[#334155]/50 transition-colors text-left",children:[(0,r.jsx)("div",{className:"w-8 h-8 rounded-full bg-gradient-to-tr from-blue-600 via-purple-600 to-pink-600 flex-shrink-0"}),(0,r.jsx)("div",{className:"flex-1 min-w-0",children:(0,r.jsx)("p",{className:"text-sm font-semibold text-white truncate",children:e.displayName||e.username})})]},e.id))}),(0,r.jsx)("div",{className:"fixed inset-0 z-10",onClick:()=>L(!1)})]}),v&&(0,r.jsxs)("div",{className:"relative mt-3 rounded-xl overflow-hidden border border-[#334155]/50 group",children:[(0,r.jsx)("img",{src:v,alt:"Preview",className:"w-full h-auto max-h-96 object-cover"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/30 to-transparent opacity-0 group-hover:opacity-100 transition-opacity"}),(0,r.jsx)("button",{onClick:()=>{g(null),w(null)},className:"absolute top-2 right-2 p-1.5 bg-black/70 backdrop-blur-sm text-white rounded-full hover:bg-black/90 transition-all transform hover:scale-110",children:(0,r.jsx)(s.X,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"p-4 sm:p-5 border-t border-[#334155]/50 bg-[#1e293b] space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("label",{className:"flex items-center gap-2.5 px-4 py-2 bg-[#334155]/30 hover:bg-[#334155]/50 rounded-xl cursor-pointer transition-all group border border-[#334155]/20",children:[(0,r.jsx)(l.Image,{className:"w-4 h-4 text-green-400 group-hover:scale-110 transition-transform"}),(0,r.jsx)("span",{className:"text-sm font-semibold text-[#e2e8f0]",children:"Add Photo"}),(0,r.jsx)("input",{type:"file",className:"hidden",accept:"image/*",onChange:q})]}),b&&(0,r.jsx)("span",{className:"text-[12px] text-blue-400 font-medium",children:"Image selected"})]}),(0,r.jsx)("button",{onClick:W,disabled:!x.trim()&&!b||C,className:"w-full h-[48px] bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-500 hover:to-indigo-500 disabled:opacity-50 disabled:grayscale text-white font-bold rounded-xl transition-all shadow-lg active:scale-[0.98] flex items-center justify-center gap-2",children:C?(0,r.jsx)("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(a.Send,{className:"w-4 h-4 mr-1"}),(0,r.jsx)("span",{children:"Post to Newsfeed"})]})})]})]})})]})}e.s(["default",()=>h])},54894,417,80071,96143,e=>{"use strict";var r=e.i(75254);let n=(0,r.default)("laugh",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M18 13a6 6 0 0 1-6 5 6 6 0 0 1-6-5h12Z",key:"b2q4dd"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["Laugh",()=>n],54894);let l=(0,r.default)("thumbs-up",[["path",{d:"M15 5.88 14 10h5.83a2 2 0 0 1 1.92 2.56l-2.33 8A2 2 0 0 1 17.5 22H4a2 2 0 0 1-2-2v-8a2 2 0 0 1 2-2h2.76a2 2 0 0 0 1.79-1.11L12 2a3.13 3.13 0 0 1 3 3.88Z",key:"emmmcr"}],["path",{d:"M7 10v12",key:"1qc93n"}]]);e.s(["ThumbsUp",()=>l],417);let a=(0,r.default)("frown",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["line",{x1:"9",x2:"9.01",y1:"9",y2:"9",key:"yxxnd0"}],["line",{x1:"15",x2:"15.01",y1:"9",y2:"9",key:"1p4y9e"}]]);e.s(["Frown",()=>a],80071);let s=(0,r.default)("angry",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M16 16s-1.5-2-4-2-4 2-4 2",key:"epbg0q"}],["path",{d:"M7.5 8 10 9",key:"olxxln"}],["path",{d:"m14 9 2.5-1",key:"1j6cij"}],["path",{d:"M9 10h.01",key:"qbtxuw"}],["path",{d:"M15 10h.01",key:"1qmjsl"}]]);e.s(["Angry",()=>s],96143)},70273,e=>{"use strict";let r=(0,e.i(75254).default)("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]);e.s(["Star",()=>r],70273)},15772,62031,41071,e=>{"use strict";var r=e.i(43476),n=e.i(46932),l=e.i(90597),a=e.i(54894),s=e.i(417),i=e.i(80071),o=e.i(96143),c=e.i(70273);let d=[{type:"like",icon:s.ThumbsUp,color:"text-blue-500",label:"Like"},{type:"love",icon:l.Heart,color:"text-red-500",label:"Love"},{type:"haha",icon:a.Laugh,color:"text-yellow-500",label:"Haha"},{type:"wow",icon:c.Star,color:"text-purple-500",label:"Wow"},{type:"sad",icon:i.Frown,color:"text-blue-400",label:"Sad"},{type:"angry",icon:o.Angry,color:"text-orange-500",label:"Angry"}];function u({onSelect:e,onClose:l}){return(0,r.jsx)("div",{className:"absolute bottom-full left-0 mb-2 z-50",children:(0,r.jsx)(n.motion.div,{initial:{opacity:0,scale:.8,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.8,y:10},className:"bg-[#1e293b] border border-[#334155] rounded-full p-1.5 shadow-xl flex items-center gap-0.5 backdrop-blur-xl",onMouseLeave:l,children:d.map((l,a)=>(0,r.jsx)(n.motion.button,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},transition:{delay:.05*a},whileHover:{scale:1.2,y:-5},onClick:r=>{r.stopPropagation(),e(l.type)},className:"p-1.5 rounded-full hover:bg-white/10 transition-colors relative group tooltip-container",title:l.label,children:(0,r.jsx)(l.icon,{className:`w-[22px] h-[22px] ${l.color}`,fill:"love"===l.type?"currentColor":"none"})},l.type))})})}e.s(["default",()=>u],15772);var f=e.i(75254);let h=(0,f.default)("share-2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);e.s(["Share2",()=>h],62031);let m=(0,f.default)("ellipsis",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]);e.s(["MoreHorizontal",()=>m],41071)},92930,e=>{"use strict";let r=(0,e.i(75254).default)("pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);e.s(["Edit2",()=>r],92930)},53e3,3116,e=>{"use strict";var r=e.i(43476),n=e.i(15772),l=e.i(90597),a=e.i(94983),s=e.i(62031),i=e.i(41071),o=e.i(92930),c=e.i(27612),d=e.i(75254);let u=(0,d.default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>u],3116);var f=e.i(417),h=e.i(54894),m=e.i(80071),x=e.i(96143),p=e.i(70273),b=e.i(46932),g=e.i(88653),v=e.i(22016),w=e.i(71645),y=e.i(85384),j=e.i(37727),N=e.i(78894);let A=(0,d.default)("shield-check",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);var k=e.i(31278);function U({isOpen:e,onClose:n,postId:l,userId:a,targetName:s}){let[i,o]=(0,w.useState)(""),[c,d]=(0,w.useState)(""),[u,f]=(0,w.useState)(!1),[h,m]=(0,w.useState)(!1);if(!e)return null;let x=async()=>{if(i){f(!0);try{await y.default.post("/reports",{reason:i,details:c,postId:l,targetUserId:a}),m(!0),setTimeout(()=>{n(),m(!1),o(""),d("")},2e3)}catch(e){console.error("Failed to submit report:",e)}finally{f(!1)}}};return h?(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:(0,r.jsxs)("div",{className:"bg-[#1e293b] border border-[#334155] rounded-3xl p-8 max-w-sm w-full text-center",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-green-500/20 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(A,{className:"w-8 h-8 text-green-500"})}),(0,r.jsx)("h3",{className:"text-xl font-bold text-white mb-2",children:"Report Submitted"}),(0,r.jsx)("p",{className:"text-[#94a3b8]",children:"Thank you for helping keep our community safe. We will review this report shortly."})]})}):(0,r.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-200",children:(0,r.jsxs)("div",{className:"bg-[#1e293b] border border-[#334155] rounded-3xl w-full max-w-md flex flex-col shadow-2xl",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-[#334155]",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"p-2 bg-red-500/10 rounded-xl",children:(0,r.jsx)(N.AlertTriangle,{className:"w-6 h-6 text-red-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-bold text-white",children:"Report Content"}),(0,r.jsxs)("p",{className:"text-xs text-[#94a3b8]",children:["Reporting ",s]})]})]}),(0,r.jsx)("button",{onClick:n,className:"p-2 hover:bg-[#334155] rounded-full transition-colors text-[#94a3b8] hover:text-white",children:(0,r.jsx)(j.X,{className:"w-5 h-5"})})]}),(0,r.jsxs)("div",{className:"p-6 space-y-6",children:[(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsx)("label",{className:"text-sm font-bold text-[#94a3b8] uppercase tracking-wider",children:"Why are you reporting this?"}),(0,r.jsx)("div",{className:"space-y-2",children:["Inappropriate Content","Harassment / Hate Hate Speech","Spam / Scams","Misinformation","Violating Terms of Service","Other"].map(e=>(0,r.jsx)("button",{onClick:()=>o(e),className:`w-full text-left p-3 rounded-xl border transition-all ${i===e?"bg-blue-600 border-blue-500 text-white":"bg-[#0f172a] border-[#334155] text-[#cbd5e1] hover:border-[#475569]"}`,children:e},e))})]}),(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{className:"text-sm font-bold text-[#94a3b8] uppercase tracking-wider",children:"Additional Details (Optional)"}),(0,r.jsx)("textarea",{value:c,onChange:e=>d(e.target.value),placeholder:"Please provide any additional context...",className:"w-full bg-[#0f172a] border border-[#334155] rounded-xl p-3 text-white placeholder-[#64748b] focus:outline-none focus:border-blue-500 min-h-[100px] resize-none"})]})]}),(0,r.jsxs)("div",{className:"p-6 border-t border-[#334155] flex justify-end gap-3",children:[(0,r.jsx)("button",{onClick:n,className:"px-5 py-2.5 rounded-xl font-semibold text-[#94a3b8] hover:text-white hover:bg-[#334155] transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{onClick:x,disabled:!i||u,className:"px-5 py-2.5 rounded-xl bg-red-600 hover:bg-red-500 text-white font-semibold transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[u&&(0,r.jsx)(k.Loader2,{className:"w-4 h-4 animate-spin"}),"Submit Report"]})]})]})})}var C=e.i(24892);function F({post:e,isGuest:d=!1,onDelete:j,onUpdate:N,onEdit:A,onViewComments:k}){let[F,S]=(0,w.useState)(null),[E,M]=(0,w.useState)(e._count?.likes||0),[_,I]=(0,w.useState)(e._count?.comments||0),[R,T]=(0,w.useState)(!1),[B,L]=(0,w.useState)(null),[P,z]=(0,w.useState)(!1),[O,D]=(0,w.useState)(!1),[Q,$]=(0,w.useState)(null),[H,q]=(0,w.useState)(!1),[W,X]=(0,w.useState)(!1),[K,V]=(0,w.useState)(!1),G=(0,w.useRef)(null);(0,w.useEffect)(()=>{$(JSON.parse(localStorage.getItem("user")||"{}").id);let e=e=>{P&&G.current&&!G.current.contains(e.target)&&z(!1)};return P&&document.addEventListener("mousedown",e),J(),()=>{document.removeEventListener("mousedown",e)}},[P,e.id]);let{socket:Z}=(0,C.useSocket)();(0,w.useEffect)(()=>{if(!Z)return;Z.emit("join_post",e.id);let r=r=>{r.postId===e.id&&(I(e=>e+1),B||L(r))},n=({postId:r})=>{r===e.id&&(I(e=>Math.max(0,e-1)),J())};return Z.on("new_comment",r),Z.on("comment_deleted",n),()=>{Z.emit("leave_post",e.id),Z.off("new_comment",r),Z.off("comment_deleted",n)}},[Z,e.id]);let J=async()=>{try{let r=await y.default.get(`/posts/${e.id}/comments`);r.data.length>0&&L(r.data[0])}catch(e){console.error("Failed to fetch comments:",e)}},Y=async r=>{if(d)return void alert("Please login to react to posts!");F===r?(S(null),M(e=>Math.max(0,e-1))):(S(r),F||M(e=>e+1)),T(!1);try{let n=await y.default.post(`/posts/${e.id}/like`,{type:r});n.data.liked?S(n.data.type):S(null)}catch(e){console.error("Failed to react:",e),S(F)}},ee=async()=>{if(confirm("Are you sure you want to delete this post?")){q(!0);try{await y.default.delete(`/posts/${e.id}`),j&&j(e.id)}catch(e){console.error("Failed to delete post:",e),alert("Failed to delete post")}finally{q(!1)}}},et=Q===e.author.id;return(0,r.jsxs)(b.motion.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:`bg-gradient-to-br from-[#1e293b]/60 to-[#0f172a]/40 backdrop-blur-xl border border-[#334155]/50 rounded-2xl mb-4 hover:border-[#475569]/70 hover:shadow-xl hover:shadow-blue-500/5 transition-all duration-300 group relative ${P?"z-[100]":"z-auto"}`,children:[(0,r.jsxs)("div",{className:"p-2 flex items-center justify-between",children:[(0,r.jsxs)(v.default,{href:`/profile/${e.author.username}`,prefetch:!1,className:"flex items-center gap-2.5 hover:opacity-90 transition-opacity",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 via-purple-500 to-pink-500 bg-cover bg-center ring-2 ring-blue-500/20 group-hover:ring-blue-500/40 transition-all duration-300",style:{backgroundImage:e.author.avatarUrl?`url(${e.author.avatarUrl})`:void 0},children:!e.author.avatarUrl&&(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-white font-bold text-sm",children:(e.author.displayName||e.author.username)?.[0]?.toUpperCase()})}),(0,r.jsx)("div",{className:"absolute -bottom-0.5 -right-0.5 w-3 h-3 bg-green-500 rounded-full border-2 border-[#1e293b]"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"text-white font-bold text-[15px]",children:e.author.displayName||e.author.username}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-[11px] text-[#64748b] mt-0.5 font-medium",children:[(0,r.jsx)(u,{className:"w-3 h-3"}),(0,r.jsx)("p",{children:new Date(e.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),(0,r.jsx)("span",{className:"w-1 h-1 rounded-full bg-[#334155]"}),(0,r.jsx)("span",{className:"text-blue-500/80",children:"Public"})]})]})]}),(0,r.jsxs)("div",{className:"relative",ref:G,children:[(0,r.jsx)("button",{onClick:()=>z(!P),className:`p-2 rounded-xl transition-all ${P?"bg-[#334155] text-white":"text-[#64748b] hover:text-white hover:bg-[#334155]/50"}`,children:(0,r.jsx)(i.MoreHorizontal,{className:"w-5 h-5"})}),(0,r.jsx)(g.AnimatePresence,{children:P&&(0,r.jsx)(b.motion.div,{initial:{opacity:0,scale:.95,y:-10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-10},className:"absolute right-0 mt-1 w-40 bg-[#1e293b]/98 backdrop-blur-2xl border border-[#334155]/70 rounded-xl shadow-2xl overflow-hidden z-[110]",children:(0,r.jsx)("div",{className:"py-0.5",children:et?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>{z(!1),A&&A(e)},className:"w-full flex items-center gap-2 px-3 py-1.5 hover:bg-[#334155]/50 text-white transition-colors text-xs font-semibold group",children:[(0,r.jsx)("div",{className:"p-1.5 bg-blue-500/10 rounded-lg group-hover:bg-blue-500/20 transition-colors",children:(0,r.jsx)(o.Edit2,{className:"w-3.5 h-3.5 text-blue-400"})}),"Edit Post"]}),(0,r.jsxs)("button",{onClick:()=>{z(!1),ee()},disabled:H,className:"w-full flex items-center gap-2 px-3 py-1.5 hover:bg-red-500/10 text-red-500 transition-colors text-xs font-semibold group disabled:opacity-50",children:[(0,r.jsx)("div",{className:"p-1.5 bg-red-500/10 rounded-lg group-hover:bg-red-500/20 transition-colors",children:H?(0,r.jsx)("div",{className:"w-3.5 h-3.5 border-2 border-red-500/30 border-t-red-500 rounded-full animate-spin"}):(0,r.jsx)(c.Trash2,{className:"w-3.5 h-3.5"})}),"Delete Post"]})]}):(0,r.jsxs)("button",{onClick:()=>{z(!1),D(!0)},className:"w-full flex items-center gap-2 px-3 py-1.5 hover:bg-yellow-500/10 text-yellow-500 transition-colors text-xs font-semibold group",children:[(0,r.jsx)("div",{className:"p-1.5 bg-yellow-500/10 rounded-lg group-hover:bg-yellow-500/20 transition-colors",children:(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"w-3.5 h-3.5",children:[(0,r.jsx)("path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z"}),(0,r.jsx)("line",{x1:"4",x2:"4",y1:"22",y2:"15"})]})}),"Report Post"]})})})}),(0,r.jsx)(U,{isOpen:O,onClose:()=>D(!1),postId:e.id,targetName:"this post"})]})]}),e.content&&(0,r.jsxs)("div",{className:"px-3 pb-2",children:[(0,r.jsx)("p",{className:`text-[#e2e8f0] text-[15px] leading-relaxed whitespace-pre-wrap ${!W&&"line-clamp-6"}`,children:e.content.split(/(\#[a-zA-Z0-9_]+\b)/).map((e,n)=>e.startsWith("#")?(0,r.jsx)("span",{className:"text-blue-400 font-semibold hover:underline cursor-pointer transition-all",children:e},n):e)}),e.content.split("\n").length>3||e.content.length>150?(0,r.jsx)("button",{onClick:()=>X(!W),className:"text-blue-500 hover:text-blue-400 text-xs font-semibold mt-1 transition-colors",children:W?"See less":"See more"}):null]}),e.imageUrl&&(0,r.jsxs)("div",{className:"relative aspect-video w-full bg-[#0f172a] overflow-hidden border-y border-[#334155]/20",children:[(0,r.jsx)("img",{src:e.imageUrl,alt:"Post",className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500"}),(0,r.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),(0,r.jsxs)("div",{className:"px-3 py-2 flex items-center justify-between border-t border-[#334155]/30",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative",onMouseEnter:()=>T(!0),onMouseLeave:()=>T(!1),onTouchStart:()=>{let e=setTimeout(()=>T(!0),500);window._reactionTimer=e},onTouchEnd:()=>{window._reactionTimer&&clearTimeout(window._reactionTimer)},children:[(0,r.jsx)(g.AnimatePresence,{children:R&&(0,r.jsx)(n.default,{onSelect:Y,onClose:()=>T(!1)})}),(0,r.jsxs)(b.motion.button,{whileTap:{scale:.9},onClick:()=>Y(F||"like"),className:"flex items-center gap-1.5 group/like relative z-10",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-full group-hover/like:bg-white/5 transition-colors",children:(e=>{switch(e){case"love":return(0,r.jsx)(l.Heart,{className:"w-5 h-5 text-red-500 fill-red-500"});case"haha":return(0,r.jsx)(h.Laugh,{className:"w-5 h-5 text-yellow-500"});case"wow":return(0,r.jsx)(p.Star,{className:"w-5 h-5 text-purple-500"});case"sad":return(0,r.jsx)(m.Frown,{className:"w-5 h-5 text-blue-400"});case"angry":return(0,r.jsx)(x.Angry,{className:"w-5 h-5 text-orange-500"});case"like":return(0,r.jsx)(f.ThumbsUp,{className:"w-5 h-5 text-blue-500 fill-blue-500"});default:return(0,r.jsx)(l.Heart,{className:"w-5 h-5 text-[#64748b]"})}})(F)}),(0,r.jsx)("span",{className:`text-xs font-bold transition-colors ${F?"text-blue-500":"text-[#64748b] group-hover/like:text-blue-500"}`,children:E})]})]}),(0,r.jsxs)(b.motion.button,{whileTap:{scale:.9},onClick:()=>k&&k(e),className:"flex items-center gap-1.5 group/comment",children:[(0,r.jsx)("div",{className:"p-1.5 rounded-full group-hover/comment:bg-blue-500/10 transition-colors",children:(0,r.jsx)(a.MessageCircle,{className:"w-4 h-4 text-[#64748b] group-hover/comment:text-blue-500 transition-colors"})}),(0,r.jsx)("span",{className:"text-xs font-bold text-[#64748b] group-hover/comment:text-blue-500 transition-colors",children:_})]})]}),(0,r.jsx)(b.motion.button,{whileTap:{scale:.9},className:"p-1.5 rounded-full hover:bg-white/5 transition-colors text-[#64748b] hover:text-white group/share",children:(0,r.jsx)(s.Share2,{className:"w-4 h-4"})})]}),B&&(0,r.jsxs)("div",{className:"border-t border-[#334155]/30 px-3 py-2.5 bg-[#0f172a]/20",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2",children:[(0,r.jsx)("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex-shrink-0 overflow-hidden ring-2 ring-blue-500/10",children:B.user?.avatarUrl?(0,r.jsx)("img",{src:B.user.avatarUrl,alt:B.user?.displayName||B.user?.username||"",className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white text-[10px] font-bold",children:(B.user?.displayName||B.user?.username)?.[0]?.toUpperCase()||"U"})})}),(0,r.jsx)("div",{className:"flex-1 flex flex-col items-start gap-1",children:(0,r.jsxs)("div",{className:"bg-[#1e293b]/40 backdrop-blur-sm rounded-2xl px-3 py-1.5 border border-[#334155]/20 hover:border-[#475569]/30 transition-colors w-fit max-w-full",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1.5 mb-0.5",children:[(0,r.jsx)("p",{className:"text-xs font-bold text-white",children:B.user?.displayName||B.user?.username||"User"}),(0,r.jsx)("span",{className:"text-[10px] text-[#64748b]",children:""}),(0,r.jsx)("span",{className:"text-[10px] text-[#64748b]",children:new Date(B.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]}),(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("p",{className:`text-xs text-[#cbd5e1] leading-relaxed break-words ${!K&&"line-clamp-3"}`,children:B.content}),B.content&&B.content.length>150&&!K&&(0,r.jsx)("button",{onClick:e=>{e.stopPropagation(),V(!0)},className:"text-[10px] font-bold text-blue-400 hover:text-blue-300 transition-colors mt-0.5",children:"See More"})]})]})})]}),_>1&&(0,r.jsxs)("button",{onClick:()=>k&&k(e),className:"mt-2 text-xs text-[#64748b] hover:text-blue-500 transition-colors font-semibold flex items-center gap-1 group/viewall",children:[(0,r.jsxs)("span",{children:["View all ",_," comments"]}),(0,r.jsx)(a.MessageCircle,{className:"w-3 h-3 group-hover/viewall:translate-x-0.5 transition-transform"})]})]})]})}e.s(["default",()=>F],53e3)},56011,e=>{"use strict";var r=e.i(43476),n=e.i(71645),l=e.i(37727),a=e.i(14764),s=e.i(31278),i=e.i(90597),o=e.i(94983),c=e.i(62031),d=e.i(41071),u=e.i(92930),f=e.i(27612),h=e.i(3116),m=e.i(43531),x=e.i(75254);let p=(0,x.default)("play",[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]]),b=(0,x.default)("square",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]]);var g=e.i(97960),v=e.i(417),w=e.i(54894),y=e.i(80071),j=e.i(96143),N=e.i(70273);let A=(0,x.default)("flag",[["path",{d:"M4 22V4a1 1 0 0 1 .4-.8A6 6 0 0 1 8 2c3 0 5 2 7.333 2q2 0 3.067-.8A1 1 0 0 1 20 4v10a1 1 0 0 1-.4.8A6 6 0 0 1 16 16c-3 0-5-2-8-2a6 6 0 0 0-4 1.528",key:"1jaruq"}]]);var k=e.i(85384),U=e.i(46932),C=e.i(88653),F=e.i(22016);let S=(0,x.default)("mic",[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]]);function E({onRecordingComplete:e,onCancel:l}){let[a,s]=(0,n.useState)(!1),[i,o]=(0,n.useState)(0),[c,d]=(0,n.useState)(null),[u,h]=(0,n.useState)(null),[m,x]=(0,n.useState)(!1),g=(0,n.useRef)(null),v=(0,n.useRef)([]),w=(0,n.useRef)(null),y=(0,n.useRef)(null),j=async()=>{try{let r=await navigator.mediaDevices.getUserMedia({audio:!0});g.current=new MediaRecorder(r),v.current=[],g.current.ondataavailable=e=>{e.data.size>0&&v.current.push(e.data)},g.current.onstop=()=>{let n=new Blob(v.current,{type:"audio/webm"});h(n);let l=URL.createObjectURL(n);d(l),e(n),r.getTracks().forEach(e=>e.stop())},g.current.start(),s(!0),w.current=setInterval(()=>{o(e=>e+1)},1e3)}catch(e){console.error("Error accessing microphone:",e),alert("Cannot access microphone. Please allow permissions."),l()}},N=e=>{let r=Math.floor(e/60);return`${r}:${(e%60).toString().padStart(2,"0")}`};return((0,n.useEffect)(()=>()=>{w.current&&clearInterval(w.current),c&&URL.revokeObjectURL(c)},[c]),c)?(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-[#334155]/50 px-3 py-1.5 rounded-full border border-blue-500/30",children:[(0,r.jsx)("button",{onClick:()=>{y.current&&(y.current.play(),x(!0))},className:"p-1.5 bg-blue-500 rounded-full text-white hover:bg-blue-600 transition-colors",children:(0,r.jsx)(p,{className:"w-3 h-3 fill-current"})}),(0,r.jsx)("div",{className:"flex-1 min-w-[60px]",children:(0,r.jsx)("div",{className:"h-1 bg-white/20 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:"h-full bg-blue-500 w-full animate-pulse"})})}),(0,r.jsx)("span",{className:"text-xs text-blue-200 font-mono",children:N(i)}),(0,r.jsx)("button",{onClick:()=>{d(null),h(null),o(0)},className:"p-1 text-red-400 hover:bg-red-500/10 rounded-full transition-colors",children:(0,r.jsx)(f.Trash2,{className:"w-4 h-4"})}),(0,r.jsx)("audio",{ref:y,src:c,onEnded:()=>x(!1),className:"hidden"})]}):(0,r.jsx)("div",{className:"flex items-center gap-2",children:a?(0,r.jsxs)("div",{className:"flex items-center gap-3 bg-red-500/10 px-3 py-1.5 rounded-full border border-red-500/20 animate-in fade-in duration-200",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),(0,r.jsx)("span",{className:"text-xs font-mono text-red-400 min-w-[35px]",children:N(i)}),(0,r.jsx)("button",{onClick:()=>{g.current&&a&&(g.current.stop(),s(!1),w.current&&clearInterval(w.current))},className:"p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:(0,r.jsx)(b,{className:"w-3 h-3 fill-current"})})]}):(0,r.jsxs)("button",{onClick:j,className:"p-2 text-red-500 hover:bg-red-500/10 rounded-full transition-colors relative group",title:"Record Voice Comment",children:[(0,r.jsx)(S,{className:"w-5 h-5"}),(0,r.jsx)("span",{className:"absolute -top-8 left-1/2 -translate-x-1/2 bg-black text-white text-[10px] px-2 py-1 rounded opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap",children:"Record Voice"})]})})}var M=e.i(24892);let _=[{id:"1",url:"https://cdn-icons-png.flaticon.com/512/742/742751.png",name:"Smile"},{id:"2",url:"https://cdn-icons-png.flaticon.com/512/742/742752.png",name:"Laugh"},{id:"3",url:"https://cdn-icons-png.flaticon.com/512/742/742921.png",name:"Love"},{id:"4",url:"https://cdn-icons-png.flaticon.com/512/742/742760.png",name:"Cool"},{id:"5",url:"https://cdn-icons-png.flaticon.com/512/742/742822.png",name:"Wink"},{id:"6",url:"https://cdn-icons-png.flaticon.com/512/742/742939.png",name:"Surprise"},{id:"7",url:"https://cdn-icons-png.flaticon.com/512/742/742750.png",name:"Sad"},{id:"8",url:"https://cdn-icons-png.flaticon.com/512/742/742785.png",name:"Angry"},{id:"9",url:"https://cdn-icons-png.flaticon.com/512/9205/9205047.png",name:"Party"},{id:"10",url:"https://cdn-icons-png.flaticon.com/512/9205/9205260.png",name:"Ghost"},{id:"11",url:"https://cdn-icons-png.flaticon.com/512/9205/9205089.png",name:"Fire"},{id:"12",url:"https://cdn-icons-png.flaticon.com/512/9205/9205423.png",name:"Star"}];function I({onSelect:e,onClose:n}){return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("div",{className:"fixed inset-0 z-40",onClick:n}),(0,r.jsxs)(U.motion.div,{initial:{opacity:0,scale:.9,y:10},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.9,y:10},className:"absolute bottom-14 right-0 bg-[#1e293b] border border-[#334155] rounded-2xl shadow-xl w-64 p-3 z-50 overflow-hidden",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between mb-2 pb-2 border-b border-[#334155]",children:[(0,r.jsx)("span",{className:"text-xs font-bold text-[#94a3b8]",children:"Stickers"}),(0,r.jsxs)("button",{onClick:n,className:"text-[#64748b] hover:text-white",children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),""]})]}),(0,r.jsx)("div",{className:"grid grid-cols-4 gap-2 h-48 overflow-y-auto pr-1",children:_.map(l=>(0,r.jsx)("button",{onClick:()=>{e(l.url),n()},className:"aspect-square p-1.5 hover:bg-[#334155] rounded-xl transition-colors flex items-center justify-center group",children:(0,r.jsx)("img",{src:l.url,alt:l.name,className:"w-full h-full object-contain group-hover:scale-110 transition-transform",onError:e=>{e.currentTarget.src=`https://ui-avatars.com/api/?name=${l.name}&background=random`}})},l.id))})]})]})}var R=e.i(15772);let T=e=>{let r=new Date,n=new Date(e),l=Math.floor((r.getTime()-n.getTime())/1e3);return l<60?"Just now":l<3600?`${Math.floor(l/60)}m`:l<86400?`${Math.floor(l/3600)}h`:l<604800?`${Math.floor(l/86400)}d`:n.toLocaleDateString()},B=({src:e})=>{let l=(0,n.useRef)(null),[a,s]=(0,n.useState)(!1);return(0,r.jsxs)("div",{className:"flex items-center gap-2 mt-2 bg-[#334155]/40 p-2 pr-4 rounded-xl w-fit border border-[#334155]/30",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{l.current&&(a?l.current.pause():l.current.play())},className:"w-8 h-8 flex-shrink-0 flex items-center justify-center bg-blue-500 rounded-full text-white hover:bg-blue-600 transition-colors shadow-blue-500/20 shadow-lg",children:a?(0,r.jsx)(b,{className:"w-3 h-3 fill-current"}):(0,r.jsx)(p,{className:"w-3.5 h-3.5 fill-current ml-0.5"})}),(0,r.jsxs)("div",{className:"flex flex-col min-w-[100px]",children:[(0,r.jsx)("span",{className:"text-[9px] text-blue-300 font-bold uppercase tracking-wider mb-1",children:"Voice Message"}),(0,r.jsx)("div",{className:"h-1.5 w-full bg-white/10 rounded-full overflow-hidden",children:(0,r.jsx)("div",{className:`h-full bg-blue-400 rounded-full transition-all duration-200 ${a?"w-full animate-pulse":"w-1/3"}`})})]}),(0,r.jsx)("audio",{ref:l,src:e,onPlay:()=>s(!0),onPause:()=>s(!1),onEnded:()=>s(!1),className:"hidden"})]})};function L({comment:e,currentUserId:l,onUpdate:a,onDelete:i,onReply:o,replies:c=[]}){let[h,m]=(0,n.useState)(!1),[x,p]=(0,n.useState)(!1),[b,g]=(0,n.useState)(e.content||""),[v,w]=(0,n.useState)(!1),[y,j]=(0,n.useState)(!1),[N,A]=(0,n.useState)(!1),[F,S]=(0,n.useState)(0),[E,M]=(0,n.useState)(!1),_=(0,n.useRef)(null);(0,n.useEffect)(()=>{x&&_.current&&(_.current.style.height="auto",_.current.style.height=_.current.scrollHeight+"px")},[b,x]);let I=l===e.user?.id,R=async()=>{if(b.trim()||e.stickerUrl||e.audioUrl){j(!0);try{await k.default.put(`/comments/${e.id}`,{content:b}),e.content=b,p(!1),a&&a(e.id,b)}catch(e){console.error("Failed to update comment:",e),alert("Failed to update comment")}finally{j(!1)}}},P=async()=>{if(confirm("Are you sure you want to delete this comment?"))try{await k.default.delete(`/comments/${e.id}`),i&&i(e.id)}catch(e){console.error("Failed to delete comment:",e),alert("Failed to delete comment")}};return(0,r.jsxs)("div",{className:"flex flex-col w-full gap-1",children:[(0,r.jsxs)("div",{className:"flex items-start gap-2 group relative w-full",children:[(0,r.jsx)("div",{className:"w-7 h-7 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex-shrink-0 overflow-hidden ring-2 ring-blue-500/10 mt-0.5",children:e.user?.avatarUrl?(0,r.jsx)("img",{src:e.user.avatarUrl,alt:e.user?.displayName||e.user?.username||"",className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gray-700",children:(0,r.jsx)("span",{className:"text-white text-[10px] font-bold",children:(e.user?.displayName||e.user?.username)?.[0]?.toUpperCase()||"U"})})}),(0,r.jsxs)("div",{className:"flex-1 flex items-start gap-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,r.jsxs)("div",{className:"bg-[#1e293b]/60 backdrop-blur-sm rounded-2xl px-3 py-1.5 border border-[#334155]/20 hover:border-[#475569]/30 transition-all w-fit max-w-[214px]",children:[(0,r.jsx)("div",{className:"flex items-center gap-1.5 mb-0.5",children:(0,r.jsx)("p",{className:"text-xs font-bold text-white",children:e.user?.displayName||e.user?.username||"User"})}),x?(0,r.jsxs)("div",{className:"w-full",children:[(0,r.jsx)("textarea",{ref:_,value:b,onChange:e=>g(e.target.value),className:"w-full bg-transparent border-none p-0 text-[13px] text-[#e2e8f0] resize-none focus:outline-none focus:ring-0 overflow-hidden min-h-[20px] leading-relaxed",placeholder:"Edit your comment...",autoFocus:!0,rows:1,maxLength:1e4}),(0,r.jsxs)("div",{className:"flex justify-end gap-2 mt-2",children:[(0,r.jsx)("button",{onClick:()=>{p(!1),g(e.content||"")},className:"text-[10px] font-medium text-[#94a3b8] hover:text-white transition-colors",children:"Cancel"}),(0,r.jsxs)("button",{onClick:R,disabled:y,className:"px-2 py-0.5 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 text-[10px] font-bold text-white rounded shadow-sm transition-all flex items-center gap-1",children:[y?(0,r.jsx)(s.Loader2,{className:"w-2.5 h-2.5 animate-spin"}):null,"Save"]})]})]}):(0,r.jsxs)(r.Fragment,{children:[e.content&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("p",{className:`text-[13px] text-[#e2e8f0] leading-relaxed break-words whitespace-pre-wrap ${!h&&"line-clamp-3"}`,children:e.content}),e.content.length>120&&(0,r.jsx)("button",{onClick:()=>m(!h),className:"text-[11px] font-bold text-blue-400 hover:text-blue-300 transition-colors mt-1 block hover:underline",children:h?"See Less":"See More"})]}),e.stickerUrl&&(0,r.jsx)("img",{src:e.stickerUrl,alt:"Sticker",className:"w-16 h-16 object-contain mt-1.5"}),e.audioUrl&&(0,r.jsx)("div",{className:"mt-1.5",children:(0,r.jsx)(B,{src:e.audioUrl})})]})]}),!x&&(0,r.jsxs)("div",{className:"flex items-center gap-3 px-2",children:[(0,r.jsxs)("button",{onClick:()=>{A(!N),S(e=>N?e-1:e+1)},className:`text-[11px] font-bold transition-colors ${N?"text-blue-500":"text-[#64748b] hover:text-blue-400"}`,children:["Like",F>0&&` \xb7 ${F}`]}),(0,r.jsx)("button",{onClick:()=>o&&o(e.user?.username||"User",e.id),className:"text-[11px] font-bold text-[#64748b] hover:text-blue-400 transition-colors",children:"Reply"}),(0,r.jsx)("span",{className:"text-[10px] text-[#64748b]",children:T(e.createdAt)})]})]}),I&&!x&&(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>w(!v),className:"opacity-0 group-hover:opacity-100 p-1 hover:bg-white/10 rounded-full transition-all text-[#64748b] hover:text-white",children:(0,r.jsx)(d.MoreHorizontal,{className:"w-3.5 h-3.5"})}),(0,r.jsx)(C.AnimatePresence,{children:v&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(U.motion.div,{initial:{opacity:0,scale:.95,y:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-5},className:"absolute right-0 mt-1 w-32 bg-[#1e293b]/95 backdrop-blur-xl rounded-xl shadow-2xl overflow-hidden z-[150] border border-[#334155]/50",children:(0,r.jsxs)("div",{className:"py-0.5",children:[(0,r.jsxs)("button",{onClick:()=>{w(!1),p(!0)},className:"w-full flex items-center gap-2 px-3 py-1.5 text-xs text-white hover:bg-[#334155]/50 transition-colors group/edit font-semibold",children:[(0,r.jsx)(u.Edit2,{className:"w-3 h-3 text-blue-400"}),"Edit"]}),(0,r.jsxs)("button",{onClick:()=>{w(!1),P()},className:"w-full flex items-center gap-2 px-3 py-1.5 text-xs text-red-500 hover:bg-red-500/10 transition-colors group/delete font-semibold",children:[(0,r.jsx)(f.Trash2,{className:"w-3 h-3 text-red-400"}),"Delete"]})]})}),(0,r.jsx)("div",{className:"fixed inset-0 z-[140]",onClick:()=>w(!1)})]})})]})]})]}),c.length>0&&(0,r.jsxs)("div",{className:"pl-11 mt-2 space-y-3 relative",children:[(0,r.jsx)("div",{className:"absolute left-[1.35rem] top-0 bottom-0 w-0.5 bg-[#334155]/20 rounded-full"}),c.map(e=>(0,r.jsx)(L,{comment:e,currentUserId:l,onUpdate:a,onDelete:i,onReply:o,replies:[]},e.id))]})]})}function P({isOpen:e,onClose:x,post:p,onUpdate:b,onDelete:S,currentUserId:_}){let[B,P]=(0,n.useState)([]),[z,O]=(0,n.useState)(""),[D,Q]=(0,n.useState)(!1),[$,H]=(0,n.useState)(!1),[q,W]=(0,n.useState)(!1),[X,K]=(0,n.useState)(p._count?.likes||0),[V,G]=(0,n.useState)(!1),[Z,J]=(0,n.useState)(p.content||""),[Y,ee]=(0,n.useState)(!1),[et,er]=(0,n.useState)(!1),[en,el]=(0,n.useState)(null),[ea,es]=(0,n.useState)(!1),[ei,eo]=(0,n.useState)(null),[ec,ed]=(0,n.useState)(!1),[eu,ef]=(0,n.useState)(null),[eh,em]=(0,n.useState)(null),[ex,ep]=(0,n.useState)(null),{socket:eb}=(0,M.useSocket)(),eg=(0,n.useRef)(null),ev=(0,n.useRef)(null);(0,n.useEffect)(()=>{e&&V&&(()=>{let e=eg.current;if(!e)return;e.style.height="auto";let r=Math.min(Math.max(e.scrollHeight,40),480);e.style.height=`${r}px`,e.style.overflowY=r>=480?"auto":"hidden"})()},[e,V,Z]);let ew=_===p.author.id;(0,n.useEffect)(()=>{if(!e)return;let r=e=>{"Escape"===e.key&&x()};document.addEventListener("keydown",r);let n=document.body.style.overflow;return document.body.style.overflow="hidden",()=>{document.removeEventListener("keydown",r),document.body.style.overflow=n}},[e,x]),(0,n.useEffect)(()=>{if(e&&(eN(),J(p.content||""),ej(),ey(),O(""),eo(null),ef(null),ed(!1),ep(null),eb))return eb.emit("join_post",p.id),eb.on("new_comment",e=>{e.postId===p.id&&P(r=>r.find(r=>r.id===e.id)?r:[...r,e])}),eb.on("comment_deleted",({commentId:e})=>{P(r=>r.filter(r=>r.id!==e&&r.parentId!==e))}),eb.on("comment_updated",({commentId:e,content:r})=>{P(n=>n.map(n=>n.id===e?{...n,content:r}:n))}),()=>{eb.emit("leave_post",p.id),eb.off("new_comment"),eb.off("comment_deleted"),eb.off("comment_updated")}},[e,p,eb]);let ey=async()=>{try{let e=await k.default.get("/auth/me");em(e.data)}catch(e){console.error("Failed to fetch current user:",e)}},ej=async()=>{},eN=async()=>{Q(!0);try{let e=await k.default.get(`/posts/${p.id}/comments`);P(e.data)}catch(e){console.error("Failed to fetch comments:",e)}finally{Q(!1)}},eA=async e=>{en===e?(el(null),K(e=>Math.max(0,e-1))):(el(e),en||K(e=>e+1)),es(!1);try{await k.default.post(`/posts/${p.id}/like`,{type:e})}catch(e){console.error("Failed to react:",e)}},ek=(e,r)=>{ep({id:r,username:e}),ev.current?.focus()},eU=async e=>{if(e.preventDefault(),z.trim()||ei||eu){H(!0);try{let e=new FormData;z.trim()&&e.append("content",z),ei&&e.append("audio",ei,"voice-comment.webm"),eu&&e.append("stickerUrl",eu),ex&&e.append("parentId",ex.id);let r=await k.default.post(`/posts/${p.id}/comment`,e,{headers:{"Content-Type":"multipart/form-data"}});P(e=>e.find(e=>e.id===r.data.id)?e:[...e,r.data]),O(""),eo(null),ef(null),ed(!1),ep(null),ev.current&&(ev.current.style.height="24px")}catch(e){console.error("Failed to add comment:",e)}finally{H(!1)}}},eC=async()=>{if(Z.trim()){ee(!0);try{await k.default.put(`/posts/${p.id}`,{content:Z}),p.content=Z,G(!1),b&&b()}catch(e){console.error("Failed to update post:",e),alert("Failed to update post")}finally{ee(!1)}}},eF=async()=>{if(confirm("Are you sure you want to delete this post?"))try{await k.default.delete(`/posts/${p.id}`),S&&S(p.id),x()}catch(e){console.error("Failed to delete post:",e),alert("Failed to delete post")}};return e?(0,r.jsx)("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/50 backdrop-blur-sm sm:p-4",onClick:x,role:"presentation",children:(0,r.jsxs)("div",{onClick:e=>e.stopPropagation(),role:"dialog","aria-modal":"true","aria-label":"Post details",className:"bg-[#1e293b] sm:border border-none border-[#334155]/60 sm:rounded-3xl rounded-none w-full max-w-lg h-full sm:h-auto sm:max-h-[80vh] flex flex-col overflow-hidden shadow-2xl relative",children:[(0,r.jsxs)("div",{className:"sm:hidden sticky top-0 z-[50] bg-[#1e293b] px-4 h-[44px] flex items-center justify-between border-none",children:[(0,r.jsx)("h2",{className:"text-[15px] font-bold text-white tracking-wide",children:"Post"}),(0,r.jsx)("button",{onClick:x,className:"w-8 h-8 flex items-center justify-center bg-[#334155]/50 hover:bg-[#475569]/70 rounded-full text-[#94a3b8] hover:text-white transition-all duration-200",children:(0,r.jsx)(l.X,{className:"w-4 h-4"})})]}),(0,r.jsxs)("div",{className:"flex-1 overflow-y-auto overflow-x-hidden [&::-webkit-scrollbar]:hidden [-ms-overflow-style:none] [scrollbar-width:none]",children:[(0,r.jsxs)("div",{className:"sticky top-0 z-[40] bg-[#1e293b] px-4 sm:py-3 pt-8 pb-3 mt-0 flex items-center justify-between border-b border-[#334155]/10",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)(F.default,{href:`/profile/${p.author.username}`,className:"relative flex-shrink-0 group",onClick:x,children:[(0,r.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#334155] bg-cover bg-center ring-2 ring-blue-500/20 group-hover:ring-blue-500/40 transition-all duration-300",style:{backgroundImage:p.author.avatarUrl?`url(${p.author.avatarUrl})`:void 0}}),(0,r.jsx)("div",{className:"absolute bottom-0.5 right-0.5 w-2.5 h-2.5 bg-green-500 rounded-full border-2 border-[#1e293b]"})]}),(0,r.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,r.jsx)(F.default,{href:`/profile/${p.author.username}`,className:"text-white font-bold text-[15px] hover:underline decoration-blue-500/50 underline-offset-2 leading-tight",onClick:x,children:p.author.displayName||p.author.username}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 text-[11px] font-medium text-[#64748b] mt-0.5",children:[(0,r.jsx)(h.Clock,{className:"w-3 h-3"}),(0,r.jsx)("p",{children:T(p.createdAt)}),(0,r.jsx)("span",{className:"w-1 h-1 rounded-full bg-[#334155]"}),(0,r.jsx)("span",{className:"text-blue-500/80",children:"Public"})]})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{onClick:()=>er(!et),className:`w-8 h-8 flex items-center justify-center rounded-full transition-all ${et?"bg-[#334155] text-white":"hover:bg-[#334155]/50 text-[#94a3b8] hover:text-white"}`,children:(0,r.jsx)(d.MoreHorizontal,{className:"w-5 h-5"})}),(0,r.jsx)(C.AnimatePresence,{children:et&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(U.motion.div,{initial:{opacity:0,scale:.95,y:-5},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:-5},className:"absolute right-0 mt-1 w-48 bg-[#1e293b]/98 backdrop-blur-2xl border border-[#334155]/70 rounded-xl shadow-2xl overflow-hidden z-[110] border border-[#334155]/50",children:(0,r.jsx)("div",{className:"py-1",children:ew?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>{er(!1),G(!0)},className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-[#334155]/50 text-white transition-colors text-sm font-medium group",children:[(0,r.jsx)(u.Edit2,{className:"w-4 h-4 text-blue-400"}),"Edit Post"]}),(0,r.jsxs)("button",{onClick:()=>{er(!1),eF()},className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-red-500/10 text-red-500 transition-colors text-sm font-medium group",children:[(0,r.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,r.jsx)(f.Trash2,{className:"w-4 h-4 text-red-400"})}),"Delete Post"]})]}):(0,r.jsxs)("button",{className:"w-full flex items-center gap-3 px-4 py-2.5 hover:bg-yellow-500/10 text-yellow-500 transition-colors text-sm font-medium group",children:[(0,r.jsx)(A,{className:"w-4 h-4"}),"Report Post"]})})}),(0,r.jsx)("div",{className:"fixed inset-0 z-[105]",onClick:()=>er(!1)})]})})]}),(0,r.jsx)("button",{onClick:x,className:"hidden sm:flex w-8 h-8 items-center justify-center bg-[#334155]/50 hover:bg-[#475569]/70 rounded-full text-[#94a3b8] hover:text-white transition-all duration-200",children:(0,r.jsx)(l.X,{className:"w-4 h-4"})})]})]}),(0,r.jsxs)("div",{className:"px-4 pt-3 pb-0 bg-[#0f172a]/30",children:[(0,r.jsx)("div",{className:V?"mb-1":"mb-3",children:V?(0,r.jsx)("div",{className:"animate-in fade-in slide-in-from-top-2 duration-200",children:(0,r.jsx)("textarea",{ref:eg,value:Z,onChange:e=>J(e.target.value),className:"w-full bg-transparent border-none outline-none focus:ring-0 text-white placeholder-[#64748b] resize-none py-1 text-[15px] leading-relaxed overflow-y-auto [&::-webkit-scrollbar]:hidden",style:{minHeight:40,maxHeight:480},rows:1,placeholder:"Edit your post...",autoFocus:!0,maxLength:65e3})}):(0,r.jsx)(r.Fragment,{children:p.content&&(0,r.jsx)("p",{className:"text-[#e2e8f0] text-[15px] leading-relaxed whitespace-pre-wrap",children:p.content})})}),p.imageUrl&&(0,r.jsx)("div",{className:"rounded-lg overflow-hidden bg-black mb-3 border border-[#334155]/50",children:(0,r.jsx)("img",{src:p.imageUrl,alt:"Post",className:"w-full h-auto max-h-[400px] object-contain mx-auto"})}),V&&(0,r.jsxs)("div",{className:"flex justify-center gap-3 py-4 border-t border-[#334155]/40 mt-2",children:[(0,r.jsx)("button",{onClick:()=>{G(!1),J(p.content||"")},className:"px-6 py-2.5 text-sm font-semibold text-[#94a3b8] hover:text-white transition-colors bg-[#334155]/30 hover:bg-[#334155]/50 rounded-xl border border-[#334155]/50 min-w-[120px]",children:"Cancel"}),(0,r.jsx)("button",{onClick:eC,disabled:Y||!Z.trim(),className:"px-8 py-2.5 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-500 hover:to-purple-500 disabled:opacity-50 text-sm font-bold text-white rounded-xl transition-all shadow-lg shadow-blue-500/20 active:scale-95 flex items-center justify-center gap-2 min-w-[160px]",children:Y?(0,r.jsx)(s.Loader2,{className:"w-4 h-4 animate-spin"}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(m.Check,{className:"w-4 h-4"})," ",(0,r.jsx)("span",{children:"Save Changes"})]})})]}),!V&&(0,r.jsxs)("div",{className:"px-4 h-[50px] flex items-center justify-between border-t border-[#334155]/30",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsxs)("div",{className:"relative",onMouseEnter:()=>es(!0),onMouseLeave:()=>es(!1),children:[(0,r.jsx)(C.AnimatePresence,{children:ea&&(0,r.jsx)(R.default,{onSelect:eA,onClose:()=>es(!1)})}),(0,r.jsxs)(U.motion.button,{whileTap:{scale:.9},onClick:()=>eA(en||"like"),className:"flex items-center gap-1.5 group/like relative z-10 translate-y-[1px]",children:[(0,r.jsx)("div",{className:"p-2 rounded-full group-hover/like:bg-white/5 transition-colors",children:(e=>{switch(e){case"love":return(0,r.jsx)(i.Heart,{className:"w-4 h-4 text-red-500 fill-red-500"});case"haha":return(0,r.jsx)(w.Laugh,{className:"w-4 h-4 text-yellow-500"});case"wow":return(0,r.jsx)(N.Star,{className:"w-4 h-4 text-purple-500"});case"sad":return(0,r.jsx)(y.Frown,{className:"w-4 h-4 text-blue-400"});case"angry":return(0,r.jsx)(j.Angry,{className:"w-4 h-4 text-orange-500"});case"like":return(0,r.jsx)(v.ThumbsUp,{className:"w-4 h-4 text-blue-500 fill-blue-500"});default:return(0,r.jsx)(i.Heart,{className:"w-4 h-4 text-[#64748b]"})}})(en)}),(0,r.jsx)("span",{className:`text-xs font-bold transition-colors ${en?"text-blue-500":"text-[#64748b] group-hover/like:text-blue-500"}`,children:X})]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1.5 group/comment translate-y-[1px]",children:[(0,r.jsx)("div",{className:"p-2 rounded-full group-hover/comment:bg-blue-500/10 transition-colors",children:(0,r.jsx)(o.MessageCircle,{className:"w-4 h-4 text-[#64748b] group-hover/comment:text-blue-500 transition-colors"})}),(0,r.jsx)("span",{className:"text-xs font-bold text-[#64748b] group-hover/comment:text-blue-500 transition-colors",children:B.length})]})]}),(0,r.jsx)(U.motion.button,{whileTap:{scale:.9},className:"p-2 rounded-full hover:bg-white/5 transition-colors text-[#64748b] hover:text-white group/share translate-y-[1px]",children:(0,r.jsx)(c.Share2,{className:"w-4 h-4"})})]})]}),(0,r.jsx)("div",{className:"border-t border-[#334155]/30 px-4 py-2 bg-[#0f172a]/20",children:(0,r.jsx)("div",{className:"flex-1 overflow-y-auto min-h-0 bg-[#0f172a]/20 custom-scrollbar",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:(0,r.jsx)("div",{className:"p-4 space-y-4",children:B.length>0?(0,r.jsx)("div",{className:"space-y-3.5 pb-4",children:(0,r.jsx)("div",{className:"space-y-3.5 pb-4",children:B.filter(e=>!e.parentId).map(e=>(0,r.jsx)(L,{comment:e,currentUserId:_,onUpdate:(e,r)=>P(n=>n.map(n=>n.id===e?{...n,content:r}:n)),onDelete:e=>P(r=>r.filter(r=>r.id!==e)),onReply:ek,replies:B.filter(r=>r.parentId===e.id)},e.id))})}):(0,r.jsxs)("div",{className:"text-center py-6",children:[(0,r.jsx)("p",{className:"text-[#64748b] text-xs",children:"No comments yet"}),(0,r.jsx)("p",{className:"text-[11px] text-[#475569] mt-0.5",children:"Start the conversation!"})]})})})})]}),(0,r.jsx)("div",{className:"flex-none px-3 py-2 bg-[#0f172a]/20 z-10 w-full",children:_?(0,r.jsxs)("form",{onSubmit:eU,className:"flex gap-2 items-end w-full",children:[(0,r.jsx)("div",{className:"flex-1 bg-[#1e293b]/40 hover:bg-[#1e293b]/60 transition-colors rounded-2xl px-3 py-2 min-h-[44px] flex items-center",children:eu?(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-[#1e293b] px-3 py-1 rounded-xl border border-[#334155] w-fit",children:[(0,r.jsx)("img",{src:eu,alt:"Selected",className:"w-8 h-8 object-contain"}),(0,r.jsx)("button",{type:"button",onClick:()=>ef(null),className:"p-1 hover:bg-white/10 rounded-full text-[#94a3b8]",children:(0,r.jsx)(l.X,{className:"w-3 h-3"})})]}):ex?(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-[#1e293b] px-3 py-1 rounded-xl border border-[#334155] w-fit mb-1",children:[(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsx)("span",{className:"text-[10px] text-[#94a3b8] uppercase tracking-wider font-bold",children:"Replying to"}),(0,r.jsxs)("span",{className:"text-xs text-blue-400 font-bold",children:["@",ex.username]})]}),(0,r.jsx)("button",{type:"button",onClick:()=>ep(null),className:"p-1 hover:bg-white/10 rounded-full text-[#94a3b8] ml-2",children:(0,r.jsx)(l.X,{className:"w-3 h-3"})})]}):ei?(0,r.jsxs)("div",{className:"flex items-center gap-2 bg-blue-500/10 px-3 py-1 rounded-full border border-blue-500/20 w-fit",children:[(0,r.jsx)("span",{className:"text-xs text-blue-300 font-medium whitespace-nowrap",children:"Voice recording ready"}),(0,r.jsx)("button",{type:"button",onClick:()=>eo(null),className:"p-1 hover:bg-white/10 rounded-full text-blue-200",children:(0,r.jsx)(l.X,{className:"w-3 h-3"})})]}):(0,r.jsx)("textarea",{ref:ev,value:z,onChange:e=>{O(e.target.value);let r=ev.current;if(r){r.style.height="24px";let e=Math.min(r.scrollHeight,120);r.style.height=(e>24?e:24)+"px",r.style.overflowY=r.scrollHeight>120?"auto":"hidden"}},onKeyDown:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),eU(e))},placeholder:"Write a comment...",rows:1,className:"w-full bg-transparent border-none outline-none text-[15px] text-white placeholder-[#64748b] resize-none overflow-hidden min-h-[24px] py-0 break-words whitespace-pre-wrap",style:{height:"auto"},maxLength:1e4})}),(0,r.jsxs)("div",{className:"flex items-center gap-1 shrink-0 pb-1",children:[!ei&&!eu&&!ex&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsx)("button",{type:"button",onClick:()=>ed(!ec),className:"p-2 text-[#94a3b8] hover:bg-[#334155] hover:text-blue-400 rounded-full transition-all",children:(0,r.jsx)(g.Smile,{className:"w-5 h-5"})}),(0,r.jsx)(C.AnimatePresence,{children:ec&&(0,r.jsx)("div",{className:"absolute bottom-full right-0 mb-2 z-50",children:(0,r.jsx)(I,{onSelect:e=>ef(e),onClose:()=>ed(!1)})})})]}),(0,r.jsx)(E,{onRecordingComplete:e=>eo(e),onCancel:()=>{}})]}),(0,r.jsx)("button",{type:"submit",disabled:!z.trim()&&!ei&&!eu||$,className:"p-2 bg-blue-600 hover:bg-blue-500 disabled:opacity-50 disabled:bg-[#334155] text-white rounded-full transition-all shadow-lg shadow-blue-500/20",children:(0,r.jsx)(a.Send,{className:"w-4 h-4 translate-x-px translate-y-px"})})]})]}):(0,r.jsxs)("div",{className:"flex items-center justify-between px-2",children:[(0,r.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Log in to like or comment."}),(0,r.jsx)(F.default,{href:"/login",className:"px-4 py-1.5 bg-blue-600 hover:bg-blue-500 text-white rounded-full text-xs font-bold transition-colors",children:"Login"})]})})]})}):null}e.s(["default",()=>P],56011)},69074,15377,e=>{"use strict";let r=(0,e.i(75254).default)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);e.s(["Upload",()=>r],69074);var n=e.i(43476),l=e.i(71645),a=e.i(79002),s=e.i(37727),i=e.i(61911),o=e.i(85384),c=e.i(22016);function d(){let[e,r]=(0,l.useState)([]),[d,u]=(0,l.useState)(!0),[f,h]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=localStorage.getItem("dismissedSuggestions");e&&h(JSON.parse(e)),m()},[]);let m=async()=>{try{u(!0);let e=await o.default.get("/suggestions/friends?limit=5");0===e.data.length&&(e=await o.default.get("/suggestions/random?limit=5")),r(e.data)}catch(e){console.error("Failed to fetch suggestions:",e)}finally{u(!1)}},x=async n=>{try{await o.default.post(`/friends/request/${n}`),r(e.filter(e=>e.id!==n))}catch(e){console.error("Failed to send friend request:",e)}},p=e.filter(e=>!f.includes(e.id));return d?(0,n.jsxs)("div",{className:"bg-[#1e293b]/50 backdrop-blur-xl border border-[#334155] rounded-2xl p-4",children:[(0,n.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Suggested for you"}),(0,n.jsx)("div",{className:"space-y-3",children:[1,2,3].map(e=>(0,n.jsxs)("div",{className:"animate-pulse flex items-center gap-3",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-[#334155]"}),(0,n.jsxs)("div",{className:"flex-1",children:[(0,n.jsx)("div",{className:"h-4 bg-[#334155] rounded w-24 mb-2"}),(0,n.jsx)("div",{className:"h-3 bg-[#334155] rounded w-32"})]})]},e))})]}):0===p.length?null:(0,n.jsxs)("div",{className:"bg-[#1e293b]/50 backdrop-blur-xl border border-[#334155] rounded-2xl p-4",children:[(0,n.jsx)("h3",{className:"text-lg font-bold text-white mb-4",children:"Suggested for you"}),(0,n.jsx)("div",{className:"space-y-3",children:p.map(l=>(0,n.jsxs)("div",{className:"flex items-start gap-3 group",children:[(0,n.jsx)(c.default,{href:`/profile/${l.id}`,children:l.avatarUrl?(0,n.jsx)("img",{src:l.avatarUrl,alt:l.displayName||l.username||"",className:"w-10 h-10 rounded-full object-cover cursor-pointer hover:opacity-80 transition-opacity"}):(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-tr from-blue-600 to-purple-600 cursor-pointer hover:opacity-80 transition-opacity"})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsx)(c.default,{href:`/profile/${l.id}`,children:(0,n.jsx)("p",{className:"text-white font-medium text-sm hover:underline cursor-pointer truncate",children:l.displayName||l.username})}),l.mutualFriendsCount>0?(0,n.jsxs)("div",{className:"flex items-center gap-1 text-xs text-[#64748b] mt-0.5",children:[(0,n.jsx)(i.Users,{className:"w-3 h-3"}),(0,n.jsxs)("span",{children:[l.mutualFriendsCount," mutual friend",l.mutualFriendsCount>1?"s":""]})]}):void 0!==l.friendsCount&&(0,n.jsxs)("p",{className:"text-xs text-[#64748b] mt-0.5",children:[l.friendsCount," friends"]}),l.mutualFriends&&l.mutualFriends.length>0&&(0,n.jsx)("div",{className:"flex items-center gap-1 mt-1",children:l.mutualFriends.slice(0,3).map(e=>(0,n.jsx)("div",{className:"relative group/avatar",children:e.avatarUrl?(0,n.jsx)("img",{src:e.avatarUrl,alt:e.displayName||e.username||"",className:"w-5 h-5 rounded-full border border-[#1e293b]",title:e.displayName||e.username}):(0,n.jsx)("div",{className:"w-5 h-5 rounded-full bg-gradient-to-tr from-blue-600 to-purple-600 border border-[#1e293b]",title:e.displayName||e.username})},e.id))})]}),(0,n.jsxs)("div",{className:"flex items-center gap-1",children:[(0,n.jsx)("button",{onClick:()=>x(l.id),className:"p-1.5 hover:bg-blue-500/10 rounded-lg transition-colors",title:"Add friend",children:(0,n.jsx)(a.UserPlus,{className:"w-4 h-4 text-blue-500"})}),(0,n.jsx)("button",{onClick:()=>{var n;let a;h(a=[...f,n=l.id]),localStorage.setItem("dismissedSuggestions",JSON.stringify(a)),r(e.filter(e=>e.id!==n))},className:"p-1.5 hover:bg-[#334155] rounded-lg transition-colors opacity-0 group-hover:opacity-100",title:"Dismiss",children:(0,n.jsx)(s.X,{className:"w-4 h-4 text-[#64748b]"})})]})]},l.id))}),p.length>0&&(0,n.jsx)("button",{onClick:m,className:"w-full mt-3 text-sm text-blue-500 hover:text-blue-400 font-medium transition-colors",children:"See more suggestions"})]})}e.s(["default",()=>d],15377)}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,43531,e=>{"use strict";let s=(0,e.i(75254).default)("check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);e.s(["Check",()=>s],43531)},31278,e=>{"use strict";let s=(0,e.i(75254).default)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);e.s(["Loader2",()=>s],31278)},39504,e=>{"use strict";var s=e.i(43476),t=e.i(71645),l=e.i(18566),a=e.i(61911),r=e.i(79002),i=e.i(37727),d=e.i(43531),n=e.i(31278),o=e.i(85384),c=e.i(5469);function u(){let e=(0,l.useRouter)(),[u,m]=(0,t.useState)([]),[h,x]=(0,t.useState)([]),[b,f]=(0,t.useState)([]),[p,g]=(0,t.useState)(!0),[j,N]=(0,t.useState)("suggestions"),[y,v]=(0,t.useState)(null);(0,t.useEffect)(()=>{w(),C(),k()},[]);let w=async()=>{try{let e=await o.default.get("/friends");m(e.data)}catch(e){console.error("Failed to fetch friends:",e)}},C=async()=>{try{g(!0);let e=await o.default.get("/suggestions/friends?limit=20");0===e.data.length&&(e=await o.default.get("/suggestions/random?limit=20")),x(e.data)}catch(e){console.error("Failed to fetch suggestions:",e)}finally{g(!1)}},k=async()=>{try{let e=await o.default.get("/friends/requests");f(e.data)}catch(e){console.error("Failed to fetch pending requests:",e)}},F=async e=>{v(e);try{await o.default.post(`/friends/accept/${e}`),f(s=>s.filter(s=>s.id!==e)),w()}catch(e){console.error("Failed to accept request:",e)}finally{v(null)}},q=async e=>{v(e);try{await o.default.delete(`/friends/reject/${e}`),f(s=>s.filter(s=>s.id!==e))}catch(e){console.error("Failed to reject request:",e)}finally{v(null)}},U=async e=>{v(e);try{await o.default.post(`/friends/request/${e}`),x(s=>s.filter(s=>s.id!==e))}catch(e){console.error("Failed to send friend request:",e)}finally{v(null)}};return(0,s.jsx)(c.default,{children:(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"mb-6",children:[(0,s.jsx)("h1",{className:"text-2xl font-black text-white",children:"Friends"}),(0,s.jsxs)("p",{className:"text-sm text-[#94a3b8]",children:[h.length," suggestions for you"]})]}),(0,s.jsxs)("div",{className:"border-b border-[#1e293b] flex gap-8 mb-6",children:[(0,s.jsxs)("button",{onClick:()=>N("suggestions"),className:`pb-4 font-semibold transition-colors relative ${"suggestions"===j?"text-blue-500":"text-[#64748b] hover:text-white"}`,children:["Suggest Friends (",h.length,")","suggestions"===j&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-500 rounded-full"})]}),(0,s.jsxs)("button",{onClick:()=>N("requests"),className:`pb-4 font-semibold transition-colors relative ${"requests"===j?"text-blue-500":"text-[#64748b] hover:text-white"}`,children:["Requests (",b.length,")","requests"===j&&(0,s.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-500 rounded-full"}),b.length>0&&(0,s.jsx)("span",{className:"ml-2 px-2 py-0.5 bg-blue-600 text-white text-xs rounded-full",children:b.length})]})]}),p?(0,s.jsx)("div",{className:"flex justify-center py-20",children:(0,s.jsx)(n.Loader2,{className:"w-8 h-8 text-blue-500 animate-spin"})}):"suggestions"===j?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:h.length>0?h.map(t=>(0,s.jsx)("div",{className:"bg-[#1e293b]/50 border border-[#334155] rounded-3xl p-6 hover:border-[#475569] transition-all group",children:(0,s.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,s.jsx)("div",{onClick:()=>e.push(`/profile/${t.username}`),className:"w-20 h-20 rounded-full bg-[#334155] overflow-hidden mb-4 cursor-pointer hover:opacity-80 transition-opacity",children:t.avatarUrl?(0,s.jsx)("img",{src:t.avatarUrl,alt:t.displayName||t.username||"",className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-600 to-purple-700",children:(0,s.jsx)("span",{className:"text-2xl font-bold text-white",children:(t.displayName||t.username)?.[0]?.toUpperCase()})})}),(0,s.jsx)("h3",{className:"font-bold text-white mb-1 group-hover:text-blue-400 transition-colors",children:t.displayName||t.username}),(0,s.jsxs)("p",{className:"text-sm text-[#64748b] mb-4",children:["@",t.username]}),t.mutualFriendsCount>0&&(0,s.jsxs)("p",{className:"text-xs text-blue-500/80 mb-4 font-medium",children:[t.mutualFriendsCount," mutual friends"]}),(0,s.jsx)("button",{onClick:()=>U(t.id),disabled:y===t.id,className:"w-full px-4 py-2.5 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 rounded-xl font-bold text-white transition-all transform active:scale-95 flex items-center justify-center gap-2",children:y===t.id?(0,s.jsx)(n.Loader2,{className:"w-4 h-4 animate-spin"}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(r.UserPlus,{className:"w-4 h-4"}),"Add Friend"]})})]})},t.id)):(0,s.jsxs)("div",{className:"col-span-full text-center py-20 bg-[#1e293b]/20 rounded-3xl border border-dashed border-[#334155]",children:[(0,s.jsx)(a.Users,{className:"w-16 h-16 mx-auto mb-4 text-[#64748b] opacity-50"}),(0,s.jsx)("p",{className:"text-[#64748b]",children:"No suggestions right now"}),(0,s.jsx)("p",{className:"text-sm text-[#64748b] mt-2",children:"Come back later to find more friends!"})]})}):(0,s.jsx)("div",{className:"space-y-4",children:b.length>0?b.map(t=>(0,s.jsx)("div",{className:"bg-[#1e293b]/50 border border-[#334155] rounded-2xl p-4 hover:border-[#475569] transition-all",children:(0,s.jsxs)("div",{className:"flex items-center gap-4",children:[(0,s.jsx)("div",{onClick:()=>e.push(`/profile/${t.username}`),className:"w-14 h-14 rounded-full bg-[#334155] overflow-hidden flex-shrink-0 cursor-pointer hover:opacity-80 transition-opacity",children:t.avatarUrl?(0,s.jsx)("img",{src:t.avatarUrl,alt:t.displayName||t.username||"",className:"w-full h-full object-cover"}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center bg-gradient-to-br from-blue-500 to-purple-600",children:(0,s.jsx)("span",{className:"text-xl font-bold",children:(t.displayName||t.username)?.[0]?.toUpperCase()})})}),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h3",{className:"font-bold text-white truncate",children:t.displayName||t.username}),(0,s.jsx)("p",{className:"text-sm text-[#64748b]",children:"wants to be your friend"})]}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)("button",{onClick:()=>F(t.id),disabled:y===t.id,className:"p-2 bg-blue-600 hover:bg-blue-700 disabled:opacity-50 rounded-full transition-colors",children:y===t.id?(0,s.jsx)(n.Loader2,{className:"w-5 h-5 animate-spin"}):(0,s.jsx)(d.Check,{className:"w-5 h-5"})}),(0,s.jsx)("button",{onClick:()=>q(t.id),disabled:y===t.id,className:"p-2 bg-[#334155] hover:bg-red-500/20 disabled:opacity-50 rounded-full transition-colors",children:(0,s.jsx)(i.X,{className:"w-5 h-5"})})]})]})},t.id)):(0,s.jsxs)("div",{className:"text-center py-20 bg-[#1e293b]/20 rounded-3xl border border-dashed border-[#334155]",children:[(0,s.jsx)(r.UserPlus,{className:"w-16 h-16 mx-auto mb-4 text-[#64748b] opacity-50"}),(0,s.jsx)("p",{className:"text-[#64748b]",children:"No pending requests"})]})})]})})}e.s(["default",()=>u])}]);
(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,71185,e=>{"use strict";var s=e.i(43476),t=e.i(71645),a=e.i(5469),l=e.i(85384);function i(){let[e,i]=(0,t.useState)("overview"),[o,c]=(0,t.useState)(!0),[x,u]=(0,t.useState)(""),[m,h]=(0,t.useState)(null),[b,p]=(0,t.useState)([]),[f,g]=(0,t.useState)(1),[v,j]=(0,t.useState)(20),[N,w]=(0,t.useState)(0),[y,S]=(0,t.useState)(""),[C,k]=(0,t.useState)(null),D=(0,t.useMemo)(()=>Math.max(1,Math.ceil(N/v)),[N,v]),M=async()=>{h((await l.default.get("/admin/overview")).data)},T=async()=>{let s={page:f,limit:v};"users"===e&&y.trim()&&(s.q=y.trim());let t=await l.default.get({users:"/admin/users",notifications:"/admin/notifications"}[e],{params:s});p(t.data[({users:"users",notifications:"notifications"})[e]]||[]),w(t.data.total||0)};(0,t.useEffect)(()=>{let s=!1;return(async()=>{c(!0),u("");try{"overview"===e?await M():await T()}catch(e){if(s)return;u(e?.response?.data?.message||e?.response?.data?.error||e?.message||"Request failed"),p([]),w(0)}finally{s||c(!1)}})(),()=>{s=!0}},[e,f,v]),(0,t.useEffect)(()=>{g(1),p([]),w(0)},[e]);let U=async s=>{if(confirm(`Delete this ${e.slice(0,-1)}?`)){k(s),u("");try{await l.default.delete(({users:e=>`/admin/users/${e}`,notifications:e=>`/admin/notifications/${e}`})[e](s)),await T()}catch(e){u(e?.response?.data?.message||e?.response?.data?.error||e?.message||"Delete failed")}finally{k(null)}}};return(0,s.jsxs)(a.default,{children:[(0,s.jsx)("div",{className:"flex items-center justify-between mb-6",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-black text-white",children:"Admin Dashboard"}),(0,s.jsx)("p",{className:"text-sm text-[#94a3b8]",children:"Manage users and content"})]})}),(0,s.jsxs)("div",{className:"bg-[#1e293b]/40 backdrop-blur-xl border border-[#334155] rounded-2xl overflow-hidden",children:[(0,s.jsx)("div",{className:"border-b border-[#334155] px-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2 py-3",children:[(0,s.jsx)(r,{tab:e,value:"overview",onClick:i,children:"Overview"}),(0,s.jsx)(r,{tab:e,value:"users",onClick:i,children:"Users"}),(0,s.jsx)(r,{tab:e,value:"notifications",onClick:i,children:"Notifications"})]})}),(0,s.jsxs)("div",{className:"p-4",children:[x&&(0,s.jsx)("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-xl text-red-400 text-sm",children:x}),"overview"===e?(0,s.jsx)(n,{loading:o,overview:m}):(0,s.jsxs)(s.Fragment,{children:["users"===e&&(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center gap-3 mb-4",children:[(0,s.jsx)("input",{value:y,onChange:e=>S(e.target.value),placeholder:"Search username or email",className:"flex-1 bg-[#0f172a] border border-[#334155] rounded-xl px-4 py-2 text-white placeholder-[#64748b] focus:outline-none focus:ring-2 focus:ring-blue-500/40"}),(0,s.jsx)("button",{onClick:()=>{g(1),c(!0),u(""),T().catch(e=>{u(e?.response?.data?.message||e?.response?.data?.error||e?.message||"Request failed")}).finally(()=>c(!1))},className:"px-4 py-2 rounded-xl bg-blue-600 hover:bg-blue-700 transition-colors font-semibold",children:"Search"})]}),(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"text-left text-[#94a3b8]",children:[d(e).map(e=>(0,s.jsx)("th",{className:"py-2 px-2 font-semibold",children:e},e)),(0,s.jsx)("th",{className:"py-2 px-2 font-semibold",children:"Actions"})]})}),(0,s.jsx)("tbody",{className:"divide-y divide-[#334155]",children:o?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"py-6 px-2 text-[#94a3b8]",colSpan:d(e).length+1,children:"Loading..."})}):0===b.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"py-6 px-2 text-[#94a3b8]",colSpan:d(e).length+1,children:"No data"})}):b.map(t=>(0,s.jsxs)("tr",{className:"text-white",children:[(function(e,s){switch(e){case"users":return[s.id,s.username,s.email,new Date(s.createdAt).toLocaleString()];case"notifications":return[s.id,s.type,s.toUsername,s.fromUsername,s.read?"yes":"no",new Date(s.createdAt).toLocaleString(),s.message];default:return[]}})(e,t).map((e,t)=>(0,s.jsx)("td",{className:"py-2 px-2 align-top whitespace-nowrap max-w-[340px] truncate",children:e},t)),(0,s.jsx)("td",{className:"py-2 px-2 whitespace-nowrap",children:(0,s.jsx)("button",{onClick:()=>U(t.id),disabled:C===t.id,className:"px-3 py-1.5 rounded-lg bg-red-500/10 text-red-400 hover:bg-red-500/20 disabled:opacity-60 transition-colors",children:C===t.id?"Deletingâ€¦":"Delete"})})]},t.id))})]})}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-3 mt-4",children:[(0,s.jsxs)("div",{className:"text-xs text-[#94a3b8]",children:["Total: ",N]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("button",{onClick:()=>g(e=>Math.max(1,e-1)),disabled:f<=1,className:"px-3 py-2 rounded-xl bg-[#334155] hover:bg-[#475569] disabled:opacity-50 transition-colors",children:"Prev"}),(0,s.jsxs)("div",{className:"text-xs text-[#94a3b8] px-2",children:["Page ",f," / ",D]}),(0,s.jsx)("button",{onClick:()=>g(e=>Math.min(D,e+1)),disabled:f>=D,className:"px-3 py-2 rounded-xl bg-[#334155] hover:bg-[#475569] disabled:opacity-50 transition-colors",children:"Next"}),(0,s.jsx)("select",{value:v,onChange:e=>j(parseInt(e.target.value,10)),className:"ml-2 bg-[#0f172a] border border-[#334155] rounded-xl px-3 py-2 text-xs text-white",children:[10,20,50,100].map(e=>(0,s.jsxs)("option",{value:e,children:[e," / page"]},e))})]})]})]})]})]})]})}function r({tab:e,value:t,onClick:a,children:l}){let i=e===t;return(0,s.jsx)("button",{onClick:()=>a(t),className:`px-3 py-2 rounded-xl text-sm font-semibold transition-colors ${i?"bg-blue-600/10 text-blue-400":"bg-transparent text-[#94a3b8] hover:bg-[#334155]/40 hover:text-white"}`,children:l})}function n({loading:e,overview:t}){if(e)return(0,s.jsx)("div",{className:"text-[#94a3b8]",children:"Loading..."});if(!t)return(0,s.jsx)("div",{className:"text-[#94a3b8]",children:"No data"});let a=[{label:"Users",value:t.counts.users},{label:"Posts",value:t.counts.posts},{label:"Comments",value:t.counts.comments},{label:"Stories",value:t.counts.stories},{label:"Messages",value:t.counts.messages},{label:"Notifications",value:t.counts.notifications}];return(0,s.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:a.map(e=>(0,s.jsxs)("div",{className:"bg-[#0f172a]/60 border border-[#334155] rounded-2xl p-4",children:[(0,s.jsx)("div",{className:"text-sm text-[#94a3b8]",children:e.label}),(0,s.jsx)("div",{className:"text-3xl font-black text-white mt-2",children:e.value})]},e.label))})}function d(e){switch(e){case"users":return["ID","Username","Email","Created"];case"notifications":return["ID","Type","To","From","Read","Created","Message"];default:return[]}}e.s(["default",()=>i])}]);